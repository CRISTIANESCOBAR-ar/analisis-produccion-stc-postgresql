import{_ as ve,m as C,P as ie,o as he,a,c as l,b as t,d as F,t as i,e as f,f as z,g as de,F as p,r as y,p as $,v as Q,n as U}from"./index-TiZQyHOj.js";class ke{constructor(R={}){const g=_=>{if(_==null||_==="")return 0;if(typeof _=="number")return _;let k=_.toString().trim();k.includes(".")&&k.includes(",")?k=k.replace(/\./g,"").replace(",","."):k.includes(",")&&(k=k.replace(",","."));const I=parseFloat(k);return isNaN(I)?0:I},x=_=>{for(const k of _)if(R[k]!==void 0)return R[k]};this.PRODUTOR=x(["PRODUTOR","productor"])||"",this.DESTINO=x(["DESTINO","destino"])||"",this.LOTE=x(["LOTE","lote"])||"",this.TP=x(["TP","tp"])||"",this.CLASSIF=x(["CLASSIF","classif"])||"",this.COR=x(["COR","cor"])||"",this.QTDE_ESTOQUE=g(x(["QTDE ESTOQUE","QTDE_ESTOQUE","qtde_estoque"])),this.SCI=g(x(["SCI","sci"])),this.MST=g(x(["MST","mst"])),this.MIC=g(x(["MIC","mic"])),this.MAT=g(x(["MAT","mat"])),this.UHML=g(x(["UHML","uhml"])),this.UI=g(x(["UI","ui"])),this.SF=g(x(["SF","sf"])),this.STR=g(x(["STR","str"])),this.ELG=g(x(["ELG","elg"])),this.RD=g(x(["RD","rd"])),this.PLUS_B=g(x(["+b","PLUS_B","plus_b"])),this.TIPO=x(["TIPO","tipo"])||"",this.TrCNT=g(x(["TrCNT","trcnt"])),this.TrAR=g(x(["TrAR","trar"])),this.TRID=g(x(["TRID","trid"])),this.PESO=g(x(["PESO","peso"])),this.PESO_MEDIO=g(x(["PESO_MEDIO","PESO MEDIO","peso_medio"])),this.CORTEZA=g(x(["CORTEZA","corteza"]))}}const Te={class:"p-6 bg-gray-50 min-h-screen"},Me={class:"bg-white p-4 rounded-lg shadow mb-6"},_e={class:"flex flex-col xl:flex-row xl:items-center justify-between gap-4"},Se={class:"flex flex-col md:flex-row md:items-center gap-4 flex-1"},we={key:0,class:"shrink-0"},Ce={class:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold bg-green-100 text-green-800 border border-green-200 shadow-sm"},Ee={class:"flex items-center space-x-3 flex-1 max-w-2xl"},Re={class:"relative flex-1"},Ie={class:"flex items-center space-x-2 shrink-0"},Le={class:"flex items-center space-x-6 shrink-0 border-t pt-4 xl:border-t-0 xl:pt-0"},Oe={key:0,class:"mt-4 bg-gray-50 p-3 rounded border"},Pe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ne={class:"font-bold text-gray-700 text-sm mb-1 border-b pb-1 flex justify-between items-center"},ze={class:"flex items-center space-x-2"},Ue=["checked","onChange"],De={key:0,class:"text-[10px] bg-green-100 text-green-800 px-1 rounded flex items-center",title:"Regla encontrada"},Fe={key:1,class:"text-[10px] bg-gray-100 text-gray-400 px-1 rounded",title:"Sin regla definida"},Ve={class:"space-y-1"},Ae={class:"flex items-center justify-between space-x-2 text-xs cursor-pointer group"},Be={class:"flex items-center"},je=["onUpdate:modelValue"],He={key:0,class:"text-gray-400 font-mono text-[10px]"},$e={class:"flex items-center justify-between space-x-2 text-xs cursor-pointer group"},Qe={class:"flex items-center"},Ge=["onUpdate:modelValue"],qe={key:0,class:"text-gray-400 font-mono text-[10px]"},Ze={class:"flex items-center justify-between space-x-2 text-xs cursor-pointer group"},Je={class:"flex items-center"},We=["onUpdate:modelValue"],Xe={key:0,class:"text-gray-400 font-mono text-[10px]"},Ye={key:1,class:"mt-3 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2 bg-gray-50 p-3 rounded border"},Ke=["value","checked","disabled","onChange"],et={class:"bg-white rounded-lg shadow overflow-hidden overflow-x-auto"},tt={key:0,class:"p-4"},st={class:"flex justify-between items-center mb-4"},at={key:0,class:"text-center py-8 text-blue-600 font-bold"},lt={key:1},rt={class:"overflow-x-auto mb-8 border rounded-lg"},ot={class:"min-w-full divide-y divide-gray-200"},nt={class:"bg-gray-100"},it={class:"bg-white divide-y divide-gray-200"},dt={class:"px-4 py-2 text-sm text-gray-900 font-medium"},ut={class:"px-4 py-2 text-sm text-gray-600"},ct={class:"px-4 py-2 text-sm"},xt={class:"px-4 py-2 text-sm text-gray-600"},pt={class:"px-4 py-2 text-sm text-gray-600"},yt={class:"px-4 py-2 text-sm text-gray-600"},gt={class:"bg-gray-50 border-t-2 border-gray-300"},mt={key:0},ft={key:1},bt={key:2},vt={key:3},ht={key:4},kt={key:5},Tt={key:6},Mt={key:7},_t={key:8},St={key:9},wt={key:10},Ct={key:11},Et={class:"overflow-x-auto border rounded-lg"},Rt={class:"min-w-full divide-y divide-gray-200"},It={class:"bg-white divide-y divide-gray-200"},Lt={key:0},Ot={class:"px-4 py-2 text-sm text-gray-900 font-medium"},Pt={class:"px-4 py-2 text-sm text-gray-600"},Nt={class:"px-4 py-2 text-sm font-bold text-gray-800"},zt={class:"px-4 py-2 text-sm text-gray-600"},Ut={class:"px-4 py-2 text-sm text-gray-600"},Dt={class:"px-4 py-2 text-sm text-gray-600"},Ft={class:"px-4 py-2 text-sm text-red-600 font-medium"},Vt={key:1,class:"min-w-full divide-y divide-gray-200"},At={class:"bg-gray-100"},Bt={class:"bg-white divide-y divide-gray-200"},jt={key:0},Ht=["colspan"],$t={key:1},Qt=["colspan"],Gt={key:0,class:"bg-gray-100 font-bold border-t-2 border-gray-300"},qt={key:0},Zt={key:1},Jt={key:2},Wt={key:3},Xt={class:"mt-4 text-sm text-gray-500 text-right"},Yt={__name:"InventoryManager",setup(ue){const R=[{key:"PRODUTOR",label:"Productor",locked:!0,default:!0},{key:"LOTE",label:"Lote",locked:!0,default:!0},{key:"DESTINO",label:"Destino",default:!0},{key:"TP",label:"Tipo",default:!1},{key:"CLASSIF",label:"Clasif.",default:!0},{key:"COR",label:"Color",default:!0},{key:"QTDE_ESTOQUE",label:"Stock",default:!0},{key:"SCI",label:"SCI",default:!1},{key:"MST",label:"MST",default:!1},{key:"MIC",label:"MIC",default:!0},{key:"MAT",label:"MAT",default:!1},{key:"UHML",label:"UHML (Len)",default:!0},{key:"UI",label:"UI",default:!1},{key:"SF",label:"SF",default:!1},{key:"STR",label:"STR",default:!0},{key:"ELG",label:"ELG",default:!1},{key:"RD",label:"RD",default:!1},{key:"PLUS_B",label:"+b",default:!1},{key:"TIPO",label:"Tipo Material",default:!1},{key:"TrCNT",label:"TrCNT",default:!1},{key:"TrAR",label:"TrAR",default:!1},{key:"TRID",label:"TRID",default:!1},{key:"PESO",label:"Peso",default:!0},{key:"PESO_MEDIO",label:"Peso Medio",default:!1},{key:"CORTEZA",label:"Corteza",default:!1}],g=C(new Set(R.filter(o=>o.default||o.locked).map(o=>o.key))),x=C(!1),_=C(!1),k=C(""),I=C([]),V=C(!1),r=C(null),A=C(!1),G=[{key:"MIC",label:"MIC"},{key:"UHML",label:"LEN (UHML)"},{key:"STR",label:"STR"},{key:"ELG",label:"ELG"},{key:"RD",label:"RD"},{key:"PLUS_B",label:"+b"},{key:"SCI",label:"SCI"}],B=C([]),w=ie({searchText:"",fardos:null}),T=ie(G.reduce((o,e)=>(o[e.key]={target:!1,hardCap:!1,tolerance:!1},o),{})),j=C(!1),ce=async()=>{try{const o=await fetch("http://localhost:3001/api/config/standards");if(o.ok){const e=await o.json();e.success&&(k.value=e.version_actual,I.value=e.tolerancias||[])}}catch(o){console.error("Error loading standards",o)}},xe=o=>{const e=T[o];return e.target&&e.hardCap&&e.tolerance},pe=(o,e)=>{T[o].target=e,T[o].hardCap=e,T[o].tolerance=e},L=o=>{let e=o;return o==="UHML"&&(e="LEN"),o==="PLUS_B"&&(e="+b"),I.value.find(d=>d.parametro===e)},H=(o,e)=>{if(!o)return"";const d=u=>u!=null&&u!==""?Number(u):null;if(e==="hardCap"){const u=d(o.limite_min_absoluto),m=d(o.limite_max_absoluto);if(u!==null&&m!==null)return`${u}-${m}`;if(u!==null)return`>= ${u}`;if(m!==null)return`<= ${m}`}if(e==="target"){const u=d(o.valor_ideal_min),m=d(o.promedio_objetivo_max);if(u!==null&&m!==null)return`${u}-${m}`;if(u!==null)return`>= ${u}`;if(m!==null)return`<= ${m}`}if(e==="tolerance"){const u=d(o.rango_tol_min),m=d(o.rango_tol_max);if(u!==null&&m!==null)return`${u}-${m}`}return""},ye=(o,e)=>{let d=e;e==="UHML"&&(d="LEN"),e==="PLUS_B"&&(d="+b");const u=T[e];if(!u||!(u.hardCap||u.target||u.tolerance))return"";const M=I.value.find(c=>c.parametro===d);if(!M)return"";const h=Number(o[e]);if(typeof h!="number"||isNaN(h))return"";if(u.hardCap){const c=parseFloat(M.limite_max_absoluto),v=parseFloat(M.limite_min_absoluto);if(!isNaN(c)&&h>c||!isNaN(v)&&h<v)return"bg-red-100 text-red-800 font-bold ring-1 ring-inset ring-red-300"}if(u.target){const c=parseFloat(M.valor_ideal_min),v=parseFloat(M.promedio_objetivo_max);let S=!1;if(d==="+b"?!isNaN(v)&&h<=v&&(S=!0):!isNaN(c)&&h>=c&&(S=!0),S)return"bg-green-100 text-green-800 font-medium ring-1 ring-inset ring-green-300"}if(u.tolerance){const c=parseFloat(M.rango_tol_min),v=parseFloat(M.rango_tol_max);if(!isNaN(c)&&!isNaN(v)&&h>=c&&h<=v)return"bg-yellow-50 text-yellow-700 font-medium ring-1 ring-inset ring-yellow-300"}return""},ge=async()=>{j.value=!0;try{const o=await fetch("http://localhost:3001/api/inventory/cotton-bales");if(!o.ok)throw new Error("Error al cargar datos");const e=await o.json();B.value=e.map(d=>new ke(d))}catch(o){console.error(o),alert("No se pudieron cargar los datos del inventario. Verifica que el servidor esté corriendo.")}finally{j.value=!1}};he(()=>{ce().then(()=>{ge()})});const me=o=>g.value.has(o),fe=o=>{const e=R.find(d=>d.key===o);e&&e.locked||(g.value.has(o)?g.value.delete(o):g.value.add(o),g.value=new Set(g.value))},P=$(()=>R.filter(o=>g.value.has(o.key))),N=$(()=>B.value.filter(o=>{const e=w.searchText.toLowerCase();return!w.searchText||o.PRODUTOR.toLowerCase().includes(e)||o.LOTE.toLowerCase().includes(e)||o.DESTINO.toLowerCase().includes(e)})),D=$(()=>{const o=N.value;if(!o||o.length===0)return null;const e=o.reduce((c,v)=>c+(Number(v.PESO)||0),0),d=o.reduce((c,v)=>c+(Number(v.QTDE_ESTOQUE)||0),0),u=o.length,m=["MIC","STR","UHML","SCI","MST","MAT","UI","SF","ELG","RD","PLUS_B","TrCNT","TrAR","TRID","PESO_MEDIO","CORTEZA"],M={};m.forEach(c=>M[c]=0),o.forEach(c=>{const v=Number(c.PESO)>0?Number(c.PESO):0;m.forEach(S=>{const O=Number(c[S])||0;M[S]+=O*v})});const h={};return m.forEach(c=>{if(e>0)h[c]=M[c]/e;else{const v=o.reduce((S,O)=>S+(Number(O[c])||0),0);h[c]=u>0?v/u:0}}),{PRODUTOR:"TOTALES / PROMEDIOS",QTDE_ESTOQUE:d,PESO:e,...h}}),b=(o,e)=>{if(o==null)return"-";const d=Number(o);return isNaN(d)?o:e==="PESO"?Math.round(d).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):["MIC","STR","UHML","SCI","MST"].includes(e)?d.toFixed(2):d},be=async()=>{if(!w.fardos||w.fardos<=0){alert("Por favor, especifica la cantidad de fardos para la mezcla.");return}if(Object.keys(T).filter(e=>{const d=T[e];return d.target||d.hardCap||d.tolerance}).length===0){alert('Por favor, selecciona al menos una variable en "Reglas de Mezclas" para optimizar.');return}A.value=!0;try{const e=await fetch("http://localhost:3001/api/inventory/blendomat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stock:N.value,rules:I.value,supervisionSettings:T,blendSize:w.fardos})});if(!e.ok){const u=await e.json();throw new Error(u.error||"Error al calcular mezclas")}const d=await e.json();if(d.success)r.value=d,V.value=!0;else throw new Error("El cálculo no fue exitoso.")}catch(e){console.error(e),alert(`Error: ${e.message}`)}finally{A.value=!1}};return(o,e)=>{var d,u,m,M,h,c,v,S,O,q,Z,J,W,X,Y,K,ee,te,se,ae,le,re,oe,ne;return a(),l("div",Te,[e[45]||(e[45]=t("h1",{class:"text-2xl font-bold mb-6 text-gray-800"},"Gestión de Inventario (Materia Prima)",-1)),t("div",Me,[t("div",_e,[t("div",Se,[k.value?(a(),l("div",we,[t("span",Ce,[e[6]||(e[6]=t("svg",{class:"w-3.5 h-3.5 mr-1.5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),F(" Versión Activa: "+i(k.value),1)])])):f("",!0),t("div",Ee,[e[8]||(e[8]=t("label",{class:"hidden lg:block text-sm font-semibold text-gray-700 whitespace-nowrap"}," Buscar: ",-1)),t("div",Re,[z(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>w.searchText=s),type:"text",placeholder:"Productor, Lote, Destino...",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm p-2 pr-10 border"},null,512),[[de,w.searchText]]),w.searchText?(a(),l("button",{key:0,onClick:e[1]||(e[1]=s=>w.searchText=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},[...e[7]||(e[7]=[t("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)])])):f("",!0)])]),t("div",Ie,[e[9]||(e[9]=t("label",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Fardos:",-1)),z(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>w.fardos=s),type:"number",min:"1",max:"99",class:"w-12 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm p-2 border text-center",placeholder:"0"},null,512),[[de,w.fardos,void 0,{number:!0}]])])]),t("div",Le,[t("button",{onClick:e[3]||(e[3]=s=>_.value=!_.value),class:"flex items-center space-x-2 text-indigo-600 text-sm font-semibold hover:text-indigo-800 transition-colors focus:outline-none"},[...e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1),t("span",null,"Reglas de Mezclas",-1)])]),t("button",{onClick:e[4]||(e[4]=s=>x.value=!x.value),class:"flex items-center space-x-2 text-blue-600 text-sm font-semibold hover:text-blue-800 transition-colors focus:outline-none"},[...e[11]||(e[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),t("span",null,"Ver Columnas",-1)])]),t("button",{onClick:be,class:"flex items-center space-x-2 text-green-600 text-sm font-bold hover:text-green-800 transition-colors focus:outline-none bg-green-50 px-3 py-1.5 rounded-md border border-green-200 shadow-sm"},[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),t("span",null,"Mezclas",-1)])])])]),_.value?(a(),l("div",Oe,[e[16]||(e[16]=t("p",{class:"text-xs text-gray-500 mb-2 italic"},"Selecciona los parámetros que deseas visualizar en la tabla.",-1)),t("div",Pe,[(a(),l(p,null,y(G,s=>t("div",{key:s.key,class:"bg-white p-2 rounded shadow-sm border border-gray-200"},[t("div",Ne,[t("div",ze,[t("input",{type:"checkbox",checked:xe(s.key),onChange:n=>pe(s.key,n.target.checked),class:"rounded text-indigo-600 focus:ring-indigo-500 h-4 w-4"},null,40,Ue),t("span",null,i(s.label),1)]),L(s.key)?(a(),l("span",De," ✓ ")):(a(),l("span",Fe," - "))]),t("div",Ve,[t("label",Ae,[t("div",Be,[z(t("input",{type:"checkbox","onUpdate:modelValue":n=>T[s.key].target=n,class:"text-green-600 rounded focus:ring-green-500"},null,8,je),[[Q,T[s.key].target]]),e[13]||(e[13]=t("span",{class:"text-gray-600 ml-2"},[F("Promedio Objetivo "),t("span",{class:"w-2 h-2 rounded-full bg-green-200 inline-block ml-1 border border-green-300"})],-1))]),L(s.key)?(a(),l("span",He,i(H(L(s.key),"target")),1)):f("",!0)]),t("label",$e,[t("div",Qe,[z(t("input",{type:"checkbox","onUpdate:modelValue":n=>T[s.key].hardCap=n,class:"text-red-600 rounded focus:ring-red-500"},null,8,Ge),[[Q,T[s.key].hardCap]]),e[14]||(e[14]=t("span",{class:"text-gray-600 ml-2"},[F("Límites Absolutos "),t("span",{class:"w-2 h-2 rounded-full bg-red-200 inline-block ml-1 border border-red-300"})],-1))]),L(s.key)?(a(),l("span",qe,i(H(L(s.key),"hardCap")),1)):f("",!0)]),t("label",Ze,[t("div",Je,[z(t("input",{type:"checkbox","onUpdate:modelValue":n=>T[s.key].tolerance=n,class:"text-yellow-500 rounded focus:ring-yellow-400"},null,8,We),[[Q,T[s.key].tolerance]]),e[15]||(e[15]=t("span",{class:"text-gray-600 ml-2"},[F("Rango Tolerancia "),t("span",{class:"w-2 h-2 rounded-full bg-yellow-100 inline-block ml-1 border border-yellow-300"})],-1))]),L(s.key)?(a(),l("span",Xe,i(H(L(s.key),"tolerance")),1)):f("",!0)])])])),64))])])):f("",!0),x.value?(a(),l("div",Ye,[(a(),l(p,null,y(R,s=>t("label",{key:s.key,class:U(["flex items-center space-x-2 text-sm text-gray-700 cursor-pointer hover:bg-gray-100 p-1 rounded",{"opacity-75 cursor-not-allowed":s.locked}])},[t("input",{type:"checkbox",value:s.key,checked:me(s.key),disabled:s.locked,onChange:n=>fe(s.key),class:"rounded text-blue-600 focus:ring-blue-500"},null,40,Ke),t("span",{class:U({"font-bold":s.locked})},i(s.label),3)],2)),64))])):f("",!0)]),t("div",et,[V.value?(a(),l("div",tt,[t("div",st,[e[17]||(e[17]=t("h2",{class:"text-xl font-bold text-gray-800"},"Plan de Mezclas Generado",-1)),t("button",{onClick:e[5]||(e[5]=s=>V.value=!1),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 font-semibold text-sm transition-colors"}," Volver al Inventario ")]),A.value?(a(),l("div",at," Calculando optimización... ")):r.value?(a(),l("div",lt,[t("div",rt,[t("table",ot,[t("thead",nt,[t("tr",null,[e[18]||(e[18]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Productor",-1)),e[19]||(e[19]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Lote",-1)),e[20]||(e[20]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado",-1)),e[21]||(e[21]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"MIC",-1)),e[22]||(e[22]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"STR",-1)),e[23]||(e[23]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"LEN",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>(a(),l("th",{key:s,class:"px-4 py-3 text-center text-xs font-bold text-indigo-600 uppercase tracking-wider border-l border-gray-300 bg-indigo-50"},i(s),1))),128))])]),t("tbody",it,[(a(!0),l(p,null,y(r.value.plan,(s,n)=>(a(),l("tr",{key:n,class:"hover:bg-gray-50"},[t("td",dt,i(s.PRODUTOR),1),t("td",ut,i(s.LOTE),1),t("td",ct,[t("span",{class:U([s.Estado==="USO"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800","px-2 py-1 rounded text-xs font-bold"])},i(s.Estado),3)]),t("td",xt,i(b(s.MIC,"MIC")),1),t("td",pt,i(b(s.STR,"STR")),1),t("td",yt,i(b(s.LEN,"UHML")),1),(a(!0),l(p,null,y(r.value.columnasMezcla,E=>(a(),l("td",{key:E,class:U(["px-4 py-2 text-sm text-center font-bold border-l border-gray-200",s.mezclas[E]?"text-indigo-600 bg-indigo-50/30":"text-gray-300"])},i(s.mezclas[E]||"-"),3))),128))]))),128))]),t("tfoot",gt,[t("tr",null,[e[24]||(e[24]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"TOTAL FARDOS",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>(a(),l("td",{key:"fardos-"+s,class:"px-4 py-2 text-sm text-center font-bold text-gray-900 border-l border-gray-300"},i(r.value.estadisticas[s].totalFardos),1))),128))]),t("tr",null,[e[25]||(e[25]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"Peso Total Bloque",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>(a(),l("td",{key:"peso-"+s,class:"px-4 py-2 text-sm text-center font-bold text-gray-900 border-l border-gray-300"},i(b(r.value.estadisticas[s].pesoTotal,"PESO")),1))),128))]),t("tr",null,[e[26]||(e[26]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"PESO PROM (KG)",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>(a(),l("td",{key:"pesoprom-"+s,class:"px-4 py-2 text-sm text-center font-bold text-gray-900 border-l border-gray-300"},i(b(r.value.estadisticas[s].pesoPromedio,"PESO")),1))),128))]),t("tr",null,[e[27]||(e[27]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"PROM MIC",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"mic-"+s,class:"px-4 py-2 text-sm text-center font-bold text-blue-600 border-l border-gray-300"},i(b((n=r.value.estadisticas[s].variables.MIC)==null?void 0:n.promedioGeneral,"MIC")),1)}),128))]),((u=(d=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:d.variables.MIC)==null?void 0:u.pctIdeal)!==void 0?(a(),l("tr",mt,[e[28]||(e[28]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"MIC 90% Promedio",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"mic-ideal-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i(b((n=r.value.estadisticas[s].variables.MIC)==null?void 0:n.promedioIdeal,"MIC")),1)}),128))])):f("",!0),((M=(m=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:m.variables.MIC)==null?void 0:M.pctTolerancia)!==void 0?(a(),l("tr",ft,[e[29]||(e[29]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"MIC Promedio 10%",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"mic-tol-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i(b((n=r.value.estadisticas[s].variables.MIC)==null?void 0:n.promedioTolerancia,"MIC")),1)}),128))])):f("",!0),((c=(h=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:h.variables.MIC)==null?void 0:c.pctIdeal)!==void 0?(a(),l("tr",bt,[e[30]||(e[30]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"MIC Porcentual 90%",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"mic-pct-ideal-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i((n=r.value.estadisticas[s].variables.MIC)==null?void 0:n.pctIdeal.toFixed(1))+"% ",1)}),128))])):f("",!0),((S=(v=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:v.variables.MIC)==null?void 0:S.pctTolerancia)!==void 0?(a(),l("tr",vt,[e[31]||(e[31]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"MIC Porcentual 10%",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"mic-pct-tol-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i((n=r.value.estadisticas[s].variables.MIC)==null?void 0:n.pctTolerancia.toFixed(1))+"% ",1)}),128))])):f("",!0),t("tr",null,[e[32]||(e[32]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"PROM STR",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"str-"+s,class:"px-4 py-2 text-sm text-center font-bold text-blue-600 border-l border-gray-300"},i(b((n=r.value.estadisticas[s].variables.STR)==null?void 0:n.promedioGeneral,"STR")),1)}),128))]),((q=(O=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:O.variables.STR)==null?void 0:q.pctIdeal)!==void 0?(a(),l("tr",ht,[e[33]||(e[33]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"STR 80% Promedio",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"str-ideal-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i(b((n=r.value.estadisticas[s].variables.STR)==null?void 0:n.promedioIdeal,"STR")),1)}),128))])):f("",!0),((J=(Z=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:Z.variables.STR)==null?void 0:J.pctTolerancia)!==void 0?(a(),l("tr",kt,[e[34]||(e[34]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"STR Promedio 20%",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"str-tol-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i(b((n=r.value.estadisticas[s].variables.STR)==null?void 0:n.promedioTolerancia,"STR")),1)}),128))])):f("",!0),((X=(W=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:W.variables.STR)==null?void 0:X.pctIdeal)!==void 0?(a(),l("tr",Tt,[e[35]||(e[35]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"STR Porcentual 80%",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"str-pct-ideal-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i((n=r.value.estadisticas[s].variables.STR)==null?void 0:n.pctIdeal.toFixed(1))+"% ",1)}),128))])):f("",!0),((K=(Y=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:Y.variables.STR)==null?void 0:K.pctTolerancia)!==void 0?(a(),l("tr",Mt,[e[36]||(e[36]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"STR Porcentual 20%",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"str-pct-tol-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i((n=r.value.estadisticas[s].variables.STR)==null?void 0:n.pctTolerancia.toFixed(1))+"% ",1)}),128))])):f("",!0),t("tr",null,[e[37]||(e[37]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"PROM LEN",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"len-"+s,class:"px-4 py-2 text-sm text-center font-bold text-blue-600 border-l border-gray-300"},i(b((n=r.value.estadisticas[s].variables.LEN)==null?void 0:n.promedioGeneral,"UHML")),1)}),128))]),((te=(ee=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:ee.variables.LEN)==null?void 0:te.pctIdeal)!==void 0?(a(),l("tr",_t,[e[38]||(e[38]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"LEN 80% Promedio",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"len-ideal-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i(b((n=r.value.estadisticas[s].variables.LEN)==null?void 0:n.promedioIdeal,"UHML")),1)}),128))])):f("",!0),((ae=(se=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:se.variables.LEN)==null?void 0:ae.pctTolerancia)!==void 0?(a(),l("tr",St,[e[39]||(e[39]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"LEN Promedio 20%",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"len-tol-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i(b((n=r.value.estadisticas[s].variables.LEN)==null?void 0:n.promedioTolerancia,"UHML")),1)}),128))])):f("",!0),((re=(le=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:le.variables.LEN)==null?void 0:re.pctIdeal)!==void 0?(a(),l("tr",wt,[e[40]||(e[40]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"LEN Porcentual 80%",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"len-pct-ideal-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i((n=r.value.estadisticas[s].variables.LEN)==null?void 0:n.pctIdeal.toFixed(1))+"% ",1)}),128))])):f("",!0),((ne=(oe=r.value.estadisticas[r.value.columnasMezcla[0]])==null?void 0:oe.variables.LEN)==null?void 0:ne.pctTolerancia)!==void 0?(a(),l("tr",Ct,[e[41]||(e[41]=t("td",{colspan:"6",class:"px-4 py-2 text-sm font-bold text-right text-gray-700"},"LEN Porcentual 20%",-1)),(a(!0),l(p,null,y(r.value.columnasMezcla,s=>{var n;return a(),l("td",{key:"len-pct-tol-"+s,class:"px-4 py-2 text-sm text-center text-gray-600 border-l border-gray-300"},i((n=r.value.estadisticas[s].variables.LEN)==null?void 0:n.pctTolerancia.toFixed(1))+"% ",1)}),128))])):f("",!0)])])]),e[44]||(e[44]=t("h3",{class:"text-lg font-bold text-gray-800 mb-3 mt-8 border-t pt-6"},"Lotes No Usados / Remanentes",-1)),t("div",Et,[t("table",Rt,[e[43]||(e[43]=t("thead",{class:"bg-red-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-red-800 uppercase tracking-wider"},"Productor"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-red-800 uppercase tracking-wider"},"Lote"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-red-800 uppercase tracking-wider"},"Fardos"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-red-800 uppercase tracking-wider"},"MIC"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-red-800 uppercase tracking-wider"},"STR"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-red-800 uppercase tracking-wider"},"LEN"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-red-800 uppercase tracking-wider"},"Motivo Logístico")])],-1)),t("tbody",It,[r.value.remanentes.length===0?(a(),l("tr",Lt,[...e[42]||(e[42]=[t("td",{colspan:"7",class:"px-4 py-4 text-center text-gray-500 italic"},"No hay lotes remanentes. Se usó todo el stock.",-1)])])):(a(!0),l(p,{key:1},y(r.value.remanentes,(s,n)=>(a(),l("tr",{key:n,class:"hover:bg-red-50/50"},[t("td",Ot,i(s.PRODUTOR),1),t("td",Pt,i(s.LOTE),1),t("td",Nt,i(s.Fardos),1),t("td",zt,i(b(s.MIC,"MIC")),1),t("td",Ut,i(b(s.STR,"STR")),1),t("td",Dt,i(b(s.LEN,"UHML")),1),t("td",Ft,i(s.Motivo),1)]))),128))])])])])):f("",!0)])):(a(),l("table",Vt,[t("thead",At,[t("tr",null,[(a(!0),l(p,null,y(P.value,s=>(a(),l("th",{key:s.key,class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap"},i(s.label),1))),128))])]),t("tbody",Bt,[j.value?(a(),l("tr",jt,[t("td",{colspan:P.value.length,class:"px-6 py-4 text-center text-blue-500 font-medium"}," Cargando inventario... ",8,Ht)])):N.value.length===0?(a(),l("tr",$t,[t("td",{colspan:P.value.length,class:"px-6 py-4 text-center text-gray-500 italic"}," No se encontraron resultados ("+i(B.value.length>0?"ajusta los filtros":"Base de datos vacía o sin conexión")+"). ",9,Qt)])):(a(!0),l(p,{key:2},y(N.value,(s,n)=>(a(),l("tr",{key:n,class:"hover:bg-gray-50 transition-colors"},[(a(!0),l(p,null,y(P.value,E=>(a(),l("td",{key:E.key,class:U(["px-4 py-2 text-sm text-gray-700 whitespace-nowrap",ye(s,E.key)])},i(b(s[E.key],E.key)),3))),128))]))),128))]),D.value?(a(),l("tfoot",Gt,[t("tr",null,[(a(!0),l(p,null,y(P.value,s=>(a(),l("td",{key:"sum-"+s.key,class:"px-4 py-3 text-sm text-gray-800 whitespace-nowrap"},[s.key==="PRODUTOR"?(a(),l("span",qt,"Totales / Promedios")):s.key==="PESO"||s.key==="QTDE_ESTOQUE"?(a(),l("span",Zt,i(b(D.value[s.key],s.key)),1)):D.value[s.key]!==void 0?(a(),l("span",Jt,i(b(D.value[s.key],s.key)),1)):(a(),l("span",Wt,"-"))]))),128))])])):f("",!0)]))]),t("div",Xt," Mostrando "+i(N.value.length)+" registros ",1)])}}},es=ve(Yt,[["__scopeId","data-v-7c602917"]]);export{es as default};
