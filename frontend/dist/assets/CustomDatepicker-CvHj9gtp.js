import{_ as X,m as w,o as Z,y as _,w as ee,z as te,a as l,c as i,t as x,e as j,b as u,h as O,i as c,n as T,F as $,r as C,f as S,d as V,l as ne,p as F}from"./index-DOrYTJc_.js";const oe={class:"fecha-controls inline-flex items-center gap-2"},ae={key:0,class:"text-sm text-slate-600 font-medium"},se=["value","placeholder"],re={class:"calendar-header flex justify-between items-center mb-3"},le={class:"calendar-selects flex gap-1"},ie=["value"],ue=["value"],de=["value"],ce=["value"],me={class:"calendar-weekdays grid grid-cols-7 gap-1 mb-2"},pe={class:"calendar-days grid grid-cols-7 gap-1"},ge=["onClick","disabled"],ve={key:1,class:"flex gap-1"},be={__name:"CustomDatepicker",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:"Selecciona una fecha"},showButtons:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(y,{emit:K}){const m=y,h=K,f=w(!1),r=w(new Date().getMonth()),d=w(new Date().getFullYear()),Y=w(null),B=w(null),E=w(!1),R=n=>{Y.value&&!Y.value.contains(n.target)&&(f.value=!1)};Z(()=>{document.addEventListener("click",R),window.addEventListener("resize",N)}),_(()=>{document.removeEventListener("click",R),window.removeEventListener("resize",N)});const W=F(()=>{if(!m.modelValue)return"";const[n,e,a]=m.modelValue.split("-").map(Number),t=new Date(n,e-1,a),o=t.getDate().toString().padStart(2,"0"),p=(t.getMonth()+1).toString().padStart(2,"0"),b=t.getFullYear();return`${o}/${p}/${b}`}),q=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],H=F(()=>{const n=new Date().getFullYear(),e=2020,a=[];for(let t=e;t<=n+1;t++)a.push(t);return a}),z=F(()=>new Date(d.value,r.value));ee(()=>f.value,n=>{if(n&&m.modelValue){const[e,a]=m.modelValue.split("-").map(Number);r.value=a-1,d.value=e}});function U(n){r.value=parseInt(n.target.value)}function G(n){d.value=parseInt(n.target.value)}const P=F(()=>{const n=[],e=new Date(d.value,r.value,1),a=new Date(d.value,r.value+1,0),t=new Date(d.value,r.value,0),o=e.getDay(),p=a.getDate(),b=t.getDate();for(let s=o-1;s>=0;s--)n.push({day:b-s,otherMonth:!0,key:`prev-${b-s}`});const g=new Date,v=m.modelValue?new Date(m.modelValue+"T00:00:00"):null;for(let s=1;s<=p;s++){const M=new Date(d.value,r.value,s);n.push({day:s,otherMonth:!1,selected:v&&v.getDate()===s&&v.getMonth()===r.value&&v.getFullYear()===d.value,today:g.getDate()===s&&g.getMonth()===r.value&&g.getFullYear()===d.value,key:`current-${s}`,date:M})}const L=42-n.length;for(let s=1;s<=L;s++)n.push({day:s,otherMonth:!0,key:`next-${s}`});return n});function I(){f.value=!f.value,f.value&&ne(N)}function N(){const n=B.value;if(!n)return;const e=n.getBoundingClientRect(),a=window.innerWidth-e.left,t=e.right;E.value=a<e.width&&t>=e.width}function A(n){r.value+=n,r.value>11?(r.value=0,d.value++):r.value<0&&(r.value=11,d.value--)}function Q(n){if(n.otherMonth)return;const e=d.value,a=(r.value+1).toString().padStart(2,"0"),t=n.day.toString().padStart(2,"0"),o=`${e}-${a}-${t}`;h("update:modelValue",o),h("change",o),f.value=!1}function D(n){if(!m.modelValue)return;const[e,a,t]=m.modelValue.split("-").map(Number),o=new Date(e,a-1,t);o.setDate(o.getDate()+n);const p=o.getFullYear(),b=(o.getMonth()+1).toString().padStart(2,"0"),g=o.getDate().toString().padStart(2,"0"),v=`${p}-${b}-${g}`;h("update:modelValue",v),h("change",v)}function J(n){if(!m.modelValue)return;const[e,a,t]=m.modelValue.split("-").map(Number),o=new Date(e,a-1,1);o.setMonth(o.getMonth()+n);const p=new Date;p.setHours(0,0,0,0);const b=o.getFullYear()===p.getFullYear()&&o.getMonth()===p.getMonth();let g;if(b){const k=new Date(p);k.setDate(k.getDate()-1),g=k.getDate()}else g=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();o.setDate(g);const v=o.getFullYear(),L=(o.getMonth()+1).toString().padStart(2,"0"),s=o.getDate().toString().padStart(2,"0"),M=`${v}-${L}-${s}`;h("update:modelValue",M),h("change",M)}return(n,e)=>{const a=te("tippy");return l(),i("div",oe,[y.label?(l(),i("label",ae,x(y.label),1)):j("",!0),u("div",{class:"custom-datepicker relative",ref_key:"datepickerRef",ref:Y},[u("input",{type:"text",value:W.value,class:"filter-input datepicker-input w-32 px-3 py-1.5 border border-slate-300 rounded-md text-sm text-left focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all cursor-pointer bg-white",placeholder:y.placeholder,onClick:I,onKeydown:[e[0]||(e[0]=O(c(t=>D(-1),["prevent"]),["left"])),e[1]||(e[1]=O(c(t=>D(1),["prevent"]),["right"]))],dir:"ltr",readonly:""},null,40,se),u("span",{class:"calendar-icon absolute right-3 top-1/2 -translate-y-1/2 text-lg cursor-pointer select-none",onClick:I},"ðŸ“…"),f.value?(l(),i("div",{key:0,ref_key:"dropdownRef",ref:B,class:T(["calendar-dropdown absolute top-full mt-1 bg-white border border-slate-200 rounded-lg shadow-xl p-3 z-50 min-w-70",E.value?"right-0":"left-0"])},[u("div",re,[u("button",{class:"calendar-nav-btn w-8 h-8 flex items-center justify-center border border-slate-200 rounded bg-white text-blue-600 hover:bg-blue-600 hover:text-white transition-colors",onClick:e[2]||(e[2]=c(t=>A(-1),["stop"]))},"<"),u("div",le,[u("select",{value:z.value.getMonth(),onChange:U,onClick:e[3]||(e[3]=c(()=>{},["stop"])),class:"calendar-select text-sm font-semibold text-slate-700 bg-transparent border-none cursor-pointer hover:bg-slate-100 rounded px-1 focus:ring-0"},[(l(),i($,null,C(q,(t,o)=>u("option",{key:o,value:o},x(t),9,ue)),64))],40,ie),u("select",{value:z.value.getFullYear(),onChange:G,onClick:e[4]||(e[4]=c(()=>{},["stop"])),class:"calendar-select text-sm font-semibold text-slate-700 bg-transparent border-none cursor-pointer hover:bg-slate-100 rounded px-1 focus:ring-0"},[(l(!0),i($,null,C(H.value,t=>(l(),i("option",{key:t,value:t},x(t),9,ce))),128))],40,de)]),u("button",{class:"calendar-nav-btn w-8 h-8 flex items-center justify-center border border-slate-200 rounded bg-white text-blue-600 hover:bg-blue-600 hover:text-white transition-colors",onClick:e[5]||(e[5]=c(t=>A(1),["stop"]))},">")]),u("div",me,[(l(),i($,null,C(["Dom","Lun","Mar","MiÃ©","Jue","Vie","SÃ¡b"],t=>u("span",{key:t,class:"text-center text-[11px] font-semibold text-slate-500"},x(t),1)),64))]),u("div",pe,[(l(!0),i($,null,C(P.value,t=>(l(),i("button",{key:t.key,class:T(["calendar-day aspect-square flex items-center justify-center text-[13px] rounded border transition-colors",{"text-slate-300 bg-slate-50 border-transparent cursor-default":t.otherMonth,"bg-blue-600 text-white border-blue-600 font-semibold":t.selected,"border-blue-600 font-semibold text-slate-700":t.today&&!t.selected,"bg-white border-slate-200 text-slate-700 hover:bg-blue-50 hover:border-blue-600":!t.selected&&!t.otherMonth&&!t.today}]),onClick:c(o=>Q(t),["stop"]),disabled:t.otherMonth},x(t.day),11,ge))),128))])],2)):j("",!0)],512),y.showButtons?(l(),i("div",ve,[S((l(),i("button",{class:"inline-flex items-center justify-center px-2 py-1 border border-slate-200 bg-white text-slate-700 rounded-md text-sm font-medium hover:bg-slate-50 transition-colors duration-150 shadow-sm h-8.5",onClick:e[6]||(e[6]=t=>J(-1)),onMousedown:e[7]||(e[7]=c(()=>{},["prevent"])),tabindex:"-1"},[...e[14]||(e[14]=[V("<<",-1)])],32)),[[a,{content:"Mes anterior",placement:"bottom"}]]),S((l(),i("button",{class:"inline-flex items-center justify-center px-2 py-1 border border-slate-200 bg-white text-slate-700 rounded-md text-sm font-medium hover:bg-slate-50 transition-colors duration-150 shadow-sm h-8.5",onClick:e[8]||(e[8]=t=>D(-1)),onMousedown:e[9]||(e[9]=c(()=>{},["prevent"])),tabindex:"-1"},[...e[15]||(e[15]=[V("<",-1)])],32)),[[a,{content:"DÃ­a anterior (â†)",placement:"bottom"}]]),S((l(),i("button",{class:"inline-flex items-center justify-center px-2 py-1 border border-slate-200 bg-white text-slate-700 rounded-md text-sm font-medium hover:bg-slate-50 transition-colors duration-150 shadow-sm h-8.5",onClick:e[10]||(e[10]=t=>D(1)),onMousedown:e[11]||(e[11]=c(()=>{},["prevent"])),tabindex:"-1"},[...e[16]||(e[16]=[V(">",-1)])],32)),[[a,{content:"DÃ­a siguiente (â†’)",placement:"bottom"}]]),S((l(),i("button",{class:"inline-flex items-center justify-center px-2 py-1 border border-slate-200 bg-white text-slate-700 rounded-md text-sm font-medium hover:bg-slate-50 transition-colors duration-150 shadow-sm h-8.5",onClick:e[12]||(e[12]=t=>J(1)),onMousedown:e[13]||(e[13]=c(()=>{},["prevent"])),tabindex:"-1"},[...e[17]||(e[17]=[V(">>",-1)])],32)),[[a,{content:"Mes siguiente",placement:"bottom"}]])])):j("",!0)])}}},he=X(be,[["__scopeId","data-v-3e6a9ff4"]]);export{he as C};
