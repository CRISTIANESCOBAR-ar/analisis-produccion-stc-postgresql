import{_ as A,o as z,a as r,c as i,b as e,A as H,F as U,r as $,u as q,x as L,i as S,t as u,d as C,f as d,g as c,q as D,v as B,e as x,T as O,m as b,p as J,z as K,n as Q}from"./index-Bya99iyG.js";const W={class:"min-h-screen bg-gradient-to-br from-slate-50 via-teal-50 to-emerald-50 p-6"},X={key:0,class:"flex items-center justify-center py-20"},Y={key:1,class:"space-y-8"},Z={class:"mb-4 flex items-center gap-3"},ee={class:"text-xl font-bold text-slate-700"},te={class:"text-sm text-slate-500 font-medium"},le={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-8"},oe={class:"bg-gradient-to-r from-emerald-500 to-teal-600 px-5 py-4"},se={class:"flex items-start justify-between"},ae={class:"flex-1"},re={class:"flex items-center gap-2 mb-1"},ie={class:"text-2xl font-bold text-white"},de={key:0,class:"text-xs text-emerald-100 bg-white/20 px-2 py-0.5 rounded-full"},ne={class:"text-white font-semibold text-base"},ue={class:"flex gap-1"},ce=["onClick"],me=["onClick"],be={class:"p-5"},pe={class:"text-xs text-slate-600 mb-4 line-clamp-3"},xe={class:"space-y-2"},fe={key:0,class:"flex items-center gap-2"},ve={class:"text-xs text-slate-600 flex-1"},ge={key:1,class:"flex items-center gap-2"},_e={class:"text-xs text-slate-600 flex-1"},ye={key:2,class:"flex items-center gap-2"},we={class:"text-xs text-slate-600 flex-1"},he={class:"mt-4 pt-4 border-t border-slate-100"},ke={class:"flex items-center justify-between"},Ce={class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden"},Ee={class:"bg-gradient-to-r from-emerald-600 to-teal-600 px-6 py-4 flex items-center justify-between"},Ve={class:"text-xl font-bold text-white"},Me={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},je={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ue=["disabled"],$e=["disabled"],Pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fe=["value"],Se={class:"space-y-4"},De={class:"bg-emerald-50 rounded-xl p-4 border border-emerald-200"},Ie={class:"grid grid-cols-2 gap-3"},Ne={class:"bg-amber-50 rounded-xl p-4 border border-amber-200"},Te={class:"grid grid-cols-2 gap-3"},Ge={class:"bg-red-50 rounded-xl p-4 border border-red-200"},Re={class:"grid grid-cols-2 gap-3"},Ae={class:"flex items-center gap-3"},ze={class:"bg-slate-50 px-6 py-4 flex items-center justify-end gap-3 border-t border-slate-200"},He=["disabled"],qe={key:0,class:"animate-spin"},Le={__name:"ParametrosHVI",setup(Be){const g="http://localhost:3001/api",P=b([]),E=b(!1),_=b(!1),m=b(!1),f=b(!1),V={codigo:"",nombre:"",descripcion:"",grupo:"",unidad:"",tipo_dato:"decimal",decimales:2,optimo_min:null,optimo_max:null,aceptable_min:null,aceptable_max:null,critico_min:null,critico_max:null,activo:!0},I=["√çndices Generales","Finura y Madurez","Longitud","Resistencia","Color","Contaminaci√≥n"],l=b({...V}),y=b(null),v=J(()=>{const a={};return P.value.forEach(t=>{const n=t.grupo||"Sin Grupo";a[n]||(a[n]=[]),a[n].push(t)}),a}),N=["√çndices Generales","Finura y Madurez","Longitud","Resistencia","Color","Contaminaci√≥n","Sin Grupo"];async function M(){E.value=!0;try{const t=await(await fetch(`${g}/parametros-hvi`)).json();t.success?P.value=t.parametros:(console.error("Error cargando par√°metros:",t.error),alert("Error al cargar par√°metros HVI"))}catch(a){console.error("Error:",a),alert("Error de conexi√≥n al cargar par√°metros")}finally{E.value=!1}}function T(){m.value=!1,y.value=null,l.value={...V},_.value=!0}function G(a){m.value=!0,y.value=a,l.value={codigo:a.codigo,nombre:a.nombre,descripcion:a.descripcion||"",grupo:a.grupo||"",unidad:a.unidad||"",tipo_dato:a.tipo_dato,decimales:a.decimales,optimo_min:a.optimo_min,optimo_max:a.optimo_max,aceptable_min:a.aceptable_min,aceptable_max:a.aceptable_max,critico_min:a.critico_min,critico_max:a.critico_max,activo:a.activo},_.value=!0}function w(){_.value=!1,setTimeout(()=>{l.value={...V},y.value=null,m.value=!1},300)}async function F(){f.value=!0;try{const a={...l.value,optimo_min:l.value.optimo_min===""?null:parseFloat(l.value.optimo_min),optimo_max:l.value.optimo_max===""?null:parseFloat(l.value.optimo_max),aceptable_min:l.value.aceptable_min===""?null:parseFloat(l.value.aceptable_min),aceptable_max:l.value.aceptable_max===""?null:parseFloat(l.value.aceptable_max),critico_min:l.value.critico_min===""?null:parseFloat(l.value.critico_min),critico_max:l.value.critico_max===""?null:parseFloat(l.value.critico_max)},t=m.value?`${g}/parametros-hvi/${y.value.id}`:`${g}/parametros-hvi`,n=m.value?"PUT":"POST",s=await(await fetch(t,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();s.success?(alert(s.message),w(),await M()):alert("Error: "+s.error)}catch(a){console.error("Error:",a),alert("Error de conexi√≥n al guardar par√°metro")}finally{f.value=!1}}async function R(a){if(confirm(`¬øEst√°s seguro de eliminar el par√°metro ${a.codigo} - ${a.nombre}?`))try{const n=await(await fetch(`${g}/parametros-hvi/${a.id}`,{method:"DELETE"})).json();n.success?(alert(n.message),await M()):alert("Error: "+n.error)}catch(t){console.error("Error:",t),alert("Error de conexi√≥n al eliminar par√°metro")}}function j(a,t,n,o){const s=k=>k==null?null:n==="entero"?Math.round(k):parseFloat(k).toFixed(o),p=s(a),h=s(t);return p!==null&&h!==null?`${p} - ${h}`:p!==null?`‚â• ${p}`:h!==null?`‚â§ ${h}`:"No especificado"}return z(()=>{M()}),(a,t)=>{const n=K("tippy");return r(),i("div",W,[e("div",{class:"mb-6 bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-slate-200 p-6"},[e("div",{class:"flex items-center justify-between"},[t[15]||(t[15]=H('<div class="flex items-center gap-3" data-v-2a07ac1f><div class="w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center shadow-md" data-v-2a07ac1f><span class="text-2xl" data-v-2a07ac1f>‚öôÔ∏è</span></div><div data-v-2a07ac1f><h1 class="text-2xl font-bold bg-gradient-to-r from-emerald-700 to-teal-700 bg-clip-text text-transparent" data-v-2a07ac1f> Par√°metros de Calidad HVI </h1><p class="text-sm text-slate-600 mt-0.5" data-v-2a07ac1f>Gesti√≥n de rangos √≥ptimos, aceptables y cr√≠ticos para cada variable</p></div></div>',1)),e("button",{onClick:T,class:"px-5 py-2.5 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-xl hover:from-emerald-700 hover:to-teal-700 transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-2 font-medium"},[...t[14]||(t[14]=[e("span",{class:"text-lg"},"‚ûï",-1),e("span",null,"Nuevo Par√°metro",-1)])])])]),E.value?(r(),i("div",X,[...t[16]||(t[16]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-600 mx-auto mb-4"}),e("p",{class:"text-slate-600"},"Cargando par√°metros...")],-1)])])):(r(),i("div",Y,[(r(!0),i(U,null,$(N.filter(o=>v.value[o]&&v.value[o].length>0),o=>(r(),i("div",{key:o},[e("div",Z,[e("h2",ee,u(o),1),t[17]||(t[17]=e("div",{class:"flex-1 h-px bg-gradient-to-r from-slate-300 to-transparent"},null,-1)),e("span",te,u(v.value[o].length)+" variable"+u(v.value[o].length!==1?"s":""),1)]),e("div",le,[(r(!0),i(U,null,$(v.value[o],s=>(r(),i("div",{key:s.id,class:"bg-white rounded-2xl shadow-md border border-slate-200 hover:shadow-xl transition-all duration-300 overflow-hidden group"},[e("div",oe,[e("div",se,[e("div",ae,[e("div",re,[e("span",ie,u(s.codigo),1),s.unidad?(r(),i("span",de,u(s.unidad),1)):x("",!0)]),e("h3",ne,u(s.nombre),1)]),e("div",ue,[d((r(),i("button",{onClick:p=>G(s),class:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors"},[...t[18]||(t[18]=[e("span",{class:"text-white text-sm"},"‚úèÔ∏è",-1)])],8,ce)),[[n,{content:"Editar par√°metro",placement:"top"}]]),d((r(),i("button",{onClick:p=>R(s),class:"w-8 h-8 bg-white/20 hover:bg-red-500 rounded-lg flex items-center justify-center transition-colors"},[...t[19]||(t[19]=[e("span",{class:"text-white text-sm"},"üóëÔ∏è",-1)])],8,me)),[[n,{content:"Eliminar par√°metro",placement:"top"}]])])])]),e("div",be,[e("p",pe,u(s.descripcion||"Sin descripci√≥n"),1),e("div",xe,[s.optimo_min!==null||s.optimo_max!==null?(r(),i("div",fe,[t[20]||(t[20]=e("div",{class:"w-2 h-2 bg-emerald-500 rounded-full"},null,-1)),t[21]||(t[21]=e("span",{class:"text-xs font-semibold text-slate-700 w-20"},"√ìptimo:",-1)),e("span",ve,u(j(s.optimo_min,s.optimo_max,s.tipo_dato,s.decimales)),1)])):x("",!0),s.aceptable_min!==null||s.aceptable_max!==null?(r(),i("div",ge,[t[22]||(t[22]=e("div",{class:"w-2 h-2 bg-amber-500 rounded-full"},null,-1)),t[23]||(t[23]=e("span",{class:"text-xs font-semibold text-slate-700 w-20"},"Aceptable:",-1)),e("span",_e,u(j(s.aceptable_min,s.aceptable_max,s.tipo_dato,s.decimales)),1)])):x("",!0),s.critico_min!==null||s.critico_max!==null?(r(),i("div",ye,[t[24]||(t[24]=e("div",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1)),t[25]||(t[25]=e("span",{class:"text-xs font-semibold text-slate-700 w-20"},"Cr√≠tico:",-1)),e("span",we,u(j(s.critico_min,s.critico_max,s.tipo_dato,s.decimales)),1)])):x("",!0)]),e("div",he,[e("div",ke,[t[26]||(t[26]=e("span",{class:"text-xs text-slate-500"},"Estado:",-1)),e("span",{class:Q(["px-2.5 py-0.5 rounded-full text-xs font-medium",s.activo?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"])},u(s.activo?"Activo":"Inactivo"),3)])])])]))),128))])]))),128))])),q(O,{name:"modal"},{default:L(()=>[_.value?(r(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:S(w,["self"])},[e("div",Ce,[e("div",Ee,[e("h2",Ve,u(m.value?"Editar Par√°metro HVI":"Nuevo Par√°metro HVI"),1),e("button",{onClick:w,class:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors"},[...t[27]||(t[27]=[e("span",{class:"text-white text-xl"},"√ó",-1)])])]),e("div",Me,[e("form",{onSubmit:S(F,["prevent"]),class:"space-y-6"},[e("div",je,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},[C(" C√≥digo "),e("span",{class:"text-red-500"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.codigo=o),type:"text",disabled:m.value,required:"",maxlength:"20",class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-slate-100 disabled:cursor-not-allowed uppercase text-sm",placeholder:"Ej: MIC"},null,8,Ue),[[c,l.value.codigo]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Unidad",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.unidad=o),type:"text",maxlength:"20",class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm",placeholder:"%, g/tex, mm"},null,512),[[c,l.value.unidad]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},[C(" Tipo de Dato "),e("span",{class:"text-red-500"},"*")],-1)),d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.tipo_dato=o),required:"",class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm"},[...t[30]||(t[30]=[e("option",{value:"decimal"},"Decimal",-1),e("option",{value:"entero"},"Entero",-1)])],512),[[D,l.value.tipo_dato]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Decimales",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.decimales=o),type:"number",min:"0",max:"4",disabled:l.value.tipo_dato==="entero",class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-slate-100 text-sm"},null,8,$e),[[c,l.value.decimales,void 0,{number:!0}]])])]),e("div",Pe,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},[C(" Nombre "),e("span",{class:"text-red-500"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.nombre=o),type:"text",required:"",maxlength:"100",class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm",placeholder:"Ej: Micronaire"},null,512),[[c,l.value.nombre]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},[C(" Grupo "),e("span",{class:"text-red-500"},"*")],-1)),d(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.value.grupo=o),required:"",class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm"},[t[34]||(t[34]=e("option",{value:""},"Selecciona un grupo...",-1)),(r(),i(U,null,$(I,o=>e("option",{key:o,value:o},u(o),9,Fe)),64))],512),[[D,l.value.grupo]])])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Descripci√≥n",-1)),d(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.value.descripcion=o),rows:"3",class:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm resize-none",placeholder:"Descripci√≥n t√©cnica de la variable..."},null,512),[[c,l.value.descripcion]])]),e("div",Se,[t[46]||(t[46]=e("h3",{class:"text-base font-bold text-slate-800 border-b border-slate-200 pb-2"},"Rangos de Calidad",-1)),e("div",De,[t[39]||(t[39]=e("div",{class:"flex items-center gap-2 mb-3"},[e("div",{class:"w-3 h-3 bg-emerald-500 rounded-full"}),e("h4",{class:"text-sm font-bold text-emerald-800"},"Rango √ìptimo")],-1)),e("div",Ie,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-xs font-semibold text-slate-700 mb-1"},"M√≠nimo",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>l.value.optimo_min=o),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm",placeholder:"0.00"},null,512),[[c,l.value.optimo_min]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-xs font-semibold text-slate-700 mb-1"},"M√°ximo",-1)),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>l.value.optimo_max=o),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-sm",placeholder:"0.00"},null,512),[[c,l.value.optimo_max]])])])]),e("div",Ne,[t[42]||(t[42]=e("div",{class:"flex items-center gap-2 mb-3"},[e("div",{class:"w-3 h-3 bg-amber-500 rounded-full"}),e("h4",{class:"text-sm font-bold text-amber-800"},"Rango Aceptable")],-1)),e("div",Te,[e("div",null,[t[40]||(t[40]=e("label",{class:"block text-xs font-semibold text-slate-700 mb-1"},"M√≠nimo",-1)),d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>l.value.aceptable_min=o),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-amber-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-sm",placeholder:"0.00"},null,512),[[c,l.value.aceptable_min]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-xs font-semibold text-slate-700 mb-1"},"M√°ximo",-1)),d(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>l.value.aceptable_max=o),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-amber-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-sm",placeholder:"0.00"},null,512),[[c,l.value.aceptable_max]])])])]),e("div",Ge,[t[45]||(t[45]=e("div",{class:"flex items-center gap-2 mb-3"},[e("div",{class:"w-3 h-3 bg-red-500 rounded-full"}),e("h4",{class:"text-sm font-bold text-red-800"},"Rango Cr√≠tico")],-1)),e("div",Re,[e("div",null,[t[43]||(t[43]=e("label",{class:"block text-xs font-semibold text-slate-700 mb-1"},"M√≠nimo",-1)),d(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>l.value.critico_min=o),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-sm",placeholder:"0.00"},null,512),[[c,l.value.critico_min]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-xs font-semibold text-slate-700 mb-1"},"M√°ximo",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>l.value.critico_max=o),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-sm",placeholder:"0.00"},null,512),[[c,l.value.critico_max]])])])])]),e("div",Ae,[d(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>l.value.activo=o),type:"checkbox",id:"activo",class:"w-4 h-4 text-emerald-600 border-slate-300 rounded focus:ring-emerald-500"},null,512),[[B,l.value.activo]]),t[47]||(t[47]=e("label",{for:"activo",class:"text-sm font-semibold text-slate-700"},"Par√°metro activo",-1))])],32)]),e("div",ze,[e("button",{onClick:w,type:"button",class:"px-5 py-2.5 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-100 transition-colors font-medium"}," Cancelar "),e("button",{onClick:F,disabled:f.value,class:"px-5 py-2.5 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-xl hover:from-emerald-700 hover:to-teal-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center gap-2"},[f.value?(r(),i("span",qe,"‚è≥")):x("",!0),e("span",null,u(f.value?"Guardando...":"Guardar"),1)],8,He)])])])):x("",!0)]),_:1})])}}},Je=A(Le,[["__scopeId","data-v-2a07ac1f"]]);export{Je as default};
