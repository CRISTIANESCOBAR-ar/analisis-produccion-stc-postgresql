import{_ as ye,a as r,c as n,b as e,A as be,d as Z,t as s,n as m,e as k,F as J,r as W,m as T,p as N,o as _e,w as $e,k as je,f as oe,g as ue,q as he,B as pe,i as ie,u as we,D as xe,z as Le,j as Ne}from"./index-Bya99iyG.js";import{S as H}from"./sweetalert2.esm.all-AlKuj1Cq.js";import{E as Pe}from"./exceljs.min-DtXTVuKQ.js";import{toPng as De}from"./index-6sdqbm2o.js";const Be={class:"mb-8 pb-6 border-b border-slate-100 flex flex-col gap-6"},Oe={class:"flex items-center justify-between gap-4"},ze={class:"flex items-center gap-4"},Ve=["disabled"],He={key:0,class:"text-xl"},Ue={key:1,class:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"},Ge={class:"text-right px-6 py-3 bg-slate-50 rounded-xl border border-slate-100 shadow-sm hidden md:block"},qe={class:"text-3xl font-black text-slate-800 font-mono"},Ze={class:"text-sm text-slate-400 font-medium"},Je={key:0,class:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-y-6 gap-x-8 p-6 bg-slate-50/50 rounded-2xl border border-slate-100 text-xs shadow-inner relative overflow-hidden"},We={class:"space-y-1"},Ke={class:"text-blue-700 font-mono text-sm font-black"},Qe={class:"space-y-1"},Xe=["title"],Ye={class:"space-y-1"},et={class:"text-slate-700 font-bold"},tt={class:"space-y-1 text-right"},st={class:"text-slate-700 font-bold"},at={class:"space-y-1"},ot={class:"flex items-center gap-2"},rt={key:0,class:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 rounded text-[10px] font-black uppercase tracking-widest"},lt={class:"space-y-1 md:col-span-3"},nt=["title"],it={key:1,class:"mt-6 p-5 bg-red-50 border border-red-200 rounded-2xl shadow-sm relative overflow-hidden"},dt={class:"flex items-start gap-4"},ct={class:"text-sm text-red-600 mt-1 font-medium leading-relaxed"},ut={class:"mb-10"},pt={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},xt={class:"text-[10px] text-slate-400 uppercase font-black tracking-tighter"},bt={class:"text-3xl font-black mt-1 leading-none tracking-tighter text-slate-800"},ft={class:"mt-3 flex items-center gap-1.5"},gt={class:"flex items-baseline gap-1 mt-1"},mt={class:"text-3xl font-black leading-none tracking-tighter text-slate-800"},vt={class:"mt-3 flex items-center gap-1.5"},ht={class:"flex items-center gap-4 mt-2"},wt={key:0,class:"flex flex-col"},yt={class:"text-xs font-black text-slate-800 tracking-tighter"},_t={key:1,class:"flex flex-col"},kt={class:"text-xs font-black text-slate-800 tracking-tighter"},Ct={key:2,class:"flex flex-col"},$t={class:"mt-4 pt-3 border-t border-slate-200/50"},At={key:0,class:"text-[8px] leading-tight text-slate-600 uppercase font-bold"},Et={key:1,class:"text-[8px] leading-tight text-slate-500 uppercase font-bold"},Rt={class:"mb-10"},Ft={class:"grid grid-cols-1 md:grid-cols-3 gap-5"},It={class:"flex items-center justify-between mb-4"},St={class:"text-xs font-black uppercase tracking-widest text-slate-400"},Mt={class:"text-2xl"},Tt={class:"text-sm font-bold text-slate-800 leading-tight mb-2"},jt={key:0,class:"bg-blue-50/50 p-3 rounded-xl border border-blue-100 mt-3 relative overflow-hidden"},Lt={class:"text-[11px] text-blue-800 font-medium italic leading-snug"},Nt={key:1,class:"mt-4 pt-4 border-t border-slate-100 flex flex-col gap-3"},Pt={class:"flex justify-between items-center bg-slate-50 p-2 rounded-lg border border-slate-100"},Dt={class:"flex flex-col"},Bt={class:"text-xs font-bold text-slate-700"},Ot={class:"flex flex-col text-right"},zt={class:"text-xs font-bold text-slate-700"},Vt={class:"mb-10"},Ht={class:"flex items-center justify-between mb-6"},Ut={class:"flex items-center gap-3"},Gt={class:"text-sm leading-none"},qt={key:0,class:"overflow-hidden bg-white border border-slate-200 rounded-3xl shadow-2xl transition-all duration-500"},Zt={class:"overflow-x-auto"},Jt={class:"w-full text-left text-xs border-collapse"},Wt={class:"divide-y divide-slate-50"},Kt={class:"px-6 py-4 font-mono text-slate-900 border-r border-slate-50 relative"},Qt={key:0,class:"absolute left-0 top-0 w-1 h-full bg-red-500 rounded-r-full shadow-[2px_0_10px_rgba(239,68,68,0.3)]"},Xt={class:"font-black text-sm text-slate-700"},Yt={key:1,class:"text-[9px] text-red-500 font-black uppercase tracking-tighter mt-0.5"},es={class:"px-6 py-4"},ts={class:"mb-2 font-black text-slate-800 uppercase tracking-tight text-[11px] leading-tight"},ss={class:"flex flex-wrap gap-1.5 font-bold"},as={key:0,class:"text-green-600 italic text-[10px] font-black uppercase tracking-widest bg-green-50 px-3 py-1 rounded-lg border border-green-100"},os={key:0},rs={colspan:"8",class:"px-6 py-16 text-center text-slate-400 font-bold italic"},ls={key:0,class:"mb-10"},ns={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},is={class:"bg-cyan-50/50 border-2 border-cyan-100 rounded-2xl p-8 shadow-sm"},ds={class:"space-y-3"},cs={class:"bg-indigo-50/50 border-2 border-indigo-100 rounded-2xl p-8 shadow-sm"},us={class:"space-y-3"},ps={class:"mb-6"},xs={class:"bg-white border border-slate-100 rounded-2xl p-10 shadow-2xl shadow-slate-200 relative overflow-hidden group"},bs={class:"grid grid-cols-1 md:grid-cols-2 gap-12 relative z-10"},fs={class:"text-sm text-slate-600 leading-loose font-medium whitespace-pre-line tracking-tight border-l-2 border-slate-100 pl-6"},gs={class:"text-sm text-slate-600 leading-loose font-medium whitespace-pre-line tracking-tight border-l-2 border-slate-100 pl-6"},ms={class:"mt-12 pt-8 border-t border-slate-50 flex flex-col items-center"},vs={class:"px-10 py-4 bg-slate-900 rounded-2xl shadow-xl shadow-slate-200 transform group-hover:scale-105 transition-transform duration-500"},hs={class:"text-sm font-black text-white uppercase tracking-widest text-center"},ws={class:"pt-6 border-t border-slate-100 flex items-center justify-between text-[10px] text-slate-400 font-black uppercase tracking-widest"},ys={class:"flex items-center gap-2 bg-slate-50 px-4 py-1 rounded-full border border-slate-100 shadow-inner"},_s={class:"text-slate-500 font-bold"},ks={__name:"AnalizadorHVI",props:{pacas:{type:Array,required:!0,default:()=>[]},metadata:{type:Object,default:()=>({})}},setup(O){const I=O,S=T(!1),A=T(!0),Q=T(!1),X=T(null),C=async()=>{var c;if(X.value){Q.value=!0;try{await new Promise(l=>setTimeout(l,500));const o=await De(X.value,{quality:.95,backgroundColor:"#ffffff",cacheBust:!0,style:{borderRadius:"0"}}),d=document.createElement("a");d.download=`HVI_An√°lisis_${((c=I.metadata)==null?void 0:c.loteEntrada)||"SinLote"}_${new Date().toISOString().split("T")[0]}.png`,d.href=o,d.click(),H.fire({icon:"success",title:"Reporte Exportado",text:"La imagen del an√°lisis se ha descargado correctamente.",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}catch(o){console.error("Error al exportar imagen:",o),H.fire({icon:"error",title:"Error de Exportaci√≥n",text:"No se pudo generar la imagen del reporte. Intente nuevamente."})}finally{Q.value=!1}}},E={"12.5":{rpm:9e4,alfa:5.3,vel_mts:122,criticidad:"ALTA"},10:{rpm:8e4,alfa:5.3,vel_mts:121.24,criticidad:"MEDIA"},"9.5Flame":{rpm:8e4,alfa:5.4,vel_mts:122.09,criticidad:"ALTA"},"10Flame":{rpm:72e3,alfa:5.3,vel_mts:109.12,criticidad:"ALTA"},9:{rpm:8e4,alfa:5.3,vel_mts:127.8,criticidad:"MEDIA"},7:{rpm:8e4,alfa:5.3,vel_mts:144.91,criticidad:"BAJA"}},b={TITULOS:{FINOS_URDIMBRE:{key:"12.5",limite_sci:112,limite_str:28.5,rango:"12.5 Urdimbre",apto:"Apto para alta velocidad.",marginal:"Marginal para Urdimbre."},FLAME:{key:"10Flame",limite_sci:102,limite_str:26,rango:"10 Flame",apto:"Apto para efecto Slub.",marginal:"Marginal para Flame."},GRUESOS:{key:"7",limite_sci:85,limite_str:22,rango:"7 Gruesos",apto:"Ideal para Trama.",marginal:"M√≠nimo para OE."}},MITIGACION:{MAQUINA:["No exceder las RPM indicas en el plan si el SCI es < 100.","Ajustar el Alfa de torsi√≥n a 5.3-5.4 para compensar fibras con STR < 25.","Revisar tensiones de bobinado para evitar roturas prematuras."],PLANTA:["Mantener Humedad Relativa estable entre 55-65%.","Limpieza exhaustiva de √≥rganos de estiraje y rotores cada 8 horas.","Ajustar presi√≥n de rodillos en cardas para mejorar la apertura de fibras cortas.","Revisar filtros de aspiraci√≥n."]},CONCLUSIONES:{URDIMBRE:"Lote Premium: Destinar preferencialmente a Urdimbre 12.5.",STANDARD:"Lote Est√°ndar: Apto para Flame y Tramas.",RIESGO:"Lote de Riesgo: Solo para Gruesos con vigilancia estrecha."}},te={sci:{min:20,max:200,nombre:"SCI"},str:{min:15,max:50,nombre:"STR"},sf:{min:3,max:20,nombre:"SF"},mic:{min:2.5,max:7,nombre:"MIC"},ui:{min:70,max:95,nombre:"UI"},uhml:{min:20,max:40,nombre:"UHML"},rd:{min:50,max:90,nombre:"RD"},plusB:{min:3,max:20,nombre:"+b"},mst:{min:3,max:12,nombre:"MST"},mat:{min:.7,max:.98,nombre:"MAT"},elg:{min:3,max:10,nombre:"ELG"},trAr:{min:0,max:5,nombre:"TrAR"}};function le(c){const o=[];for(const[d,l]of Object.entries(te)){const _=parseFloat(c[d]);isNaN(_)||_===0?o.push(`${l.nombre} nulo/cero`):(_<l.min||_>l.max)&&o.push(`${l.nombre} fuera de rango`)}return o}const U=N(()=>I.pacas.filter(c=>le(c).length===0)),L=N(()=>{if(U.value.length===0)return{sci:0,str:0,sf:0,mic:0,ui:0,uhml:0,rd:0};const c=["sci","str","sf","mic","ui","uhml","rd"],o={};c.forEach(l=>o[l]=0),U.value.forEach(l=>{c.forEach(_=>{o[_]+=parseFloat(l[_])})});const d={};return c.forEach(l=>d[l]=o[l]/U.value.length),d}),ae=N(()=>{const c=L.value;return{sci:{label:"SCI",value:c.sci,display:c.sci.toFixed(1),estado:c.sci>=112?"Excelente":c.sci>=102?"Apto Flame":c.sci>=85?"Apto Gruesos":"Riesgo"},str:{label:"STR",value:c.str,display:c.str.toFixed(1),estado:c.str>=28.5?"Urdimbre":c.str>=26?"Flame":c.str>=22?"Gruesos":"Cr√≠tico"},mic:{label:"MIC",value:c.mic,display:c.mic.toFixed(2),estado:c.mic>=3.8&&c.mic<=4.2?"Ideal":c.mic>=3.5&&c.mic<=4.9?"Aceptable":"Riesgo"},sf:{label:"SF (%)",value:c.sf,display:c.sf.toFixed(1),estado:c.sf<=9?"Ideal":c.sf<=11?"Aceptable":"Alto"},rd:{label:"Rd",value:c.rd,display:c.rd.toFixed(1),estado:c.rd>=74?"Premium":c.rd>=70?"Normal":"Opaca"}}}),q=N(()=>{const c=L.value;let o=0;return U.value.length>0&&(o=U.value.reduce((d,l)=>d+(parseFloat(l.plusB)||0),0)/U.value.length),{rd:c.rd,plusB:o,esOpaca:c.rd<70,riesgoShading:o>11}}),B=N(()=>{if(U.value.length<2)return{delta:0,stdDev:0,estado:"Insuficiente",alerta:""};const c=U.value.map(z=>parseFloat(z.sci)),o=Math.max(...c),d=Math.min(...c),l=o-d,_=c.reduce((z,V)=>z+V,0)/c.length,Y=c.reduce((z,V)=>z+Math.pow(V-_,2),0)/c.length,ee=Math.sqrt(Y),F=ee>12?"Inestable":"Estable";let D="";return l>50?D="ALERTA CR√çTICA DE MEZCLA: La brecha de calidad entre fardos es extrema. Obligatorio mezclar con un lote de alta uniformidad para evitar franjas de distinto tono o textura en el Denim (barrados).":l>=30&&(D="Dispersi√≥n Moderada: Se recomienda alimentaci√≥n alternada en la l√≠nea de apertura (fardos buenos vs fardos malos)."),{delta:l,stdDev:ee,estado:F,alerta:D}}),ne=N(()=>U.value.map(c=>{const o=parseFloat(c.sci),d=parseFloat(c.mic),l=parseFloat(c.mat),_=parseFloat(c.sf),Y=parseFloat(c.str),ee=parseFloat(c.rd),F=parseFloat(c.plusB)||0,D=[];let z=!1;const V={sci:112,str:28.5,sf:9,mic_min:3.8,mic_max:4.5,rd:72};o<V.sci&&(D.push({texto:`SCI Insuficiente (${o.toFixed(0)}) < ${V.sci}`,critica:!0}),z=!0),Y<V.str&&(D.push({texto:`STR D√©bil (${Y.toFixed(1)}) < ${V.str}`,critica:!0}),z=!0),_>V.sf&&(D.push({texto:`Fibra Corta ALTA (${_.toFixed(1)}) > ${V.sf}`,critica:!0}),z=!0),(d<V.mic_min||d>V.mic_max)&&(D.push({texto:`MIC Fuera de Rango (${d.toFixed(2)})`,critica:!0}),z=!0),ee<V.rd&&(D.push({texto:`Rd Baja (Opacidad) (${ee.toFixed(1)}) < ${V.rd}`,critica:!1}),z=!0),F>11&&(D.push({texto:`Riesgo Shading (+b ${F.toFixed(1)})`,critica:!1}),z=!0);let de="";return z?o>=102&&Y>=26?de=`Apto para Flame. Vel. moderada (${(E["10Flame"].rpm/1e3).toFixed(0)}k RPM).`:de="Apto solo para Gruesos (5/1-10/1).":de="Apto para Urdimbre (12.5 Ne).",{fardo:c.fardo,sci:o.toFixed(1),mic:d.toFixed(2),mat:l.toFixed(2),sf:_.toFixed(1),str:Y.toFixed(1),rd:ee.toFixed(1),tieneBanderaRoja:z,aptitudTexto:de,desviaciones:D,analisis:{sci:{claseBgLight:o<100?"bg-red-50 text-red-600":o<112?"bg-yellow-50 text-yellow-600":"text-green-600"},mic:{claseBgLight:d<3.8||d>4.5?"bg-orange-50 text-orange-600":"text-slate-600 font-bold"},mat:{claseBgLight:l<.85?"bg-yellow-50 text-yellow-600":"text-slate-600 font-bold"},sf:{claseBgLight:_>9?"bg-yellow-50 text-yellow-600 font-black":"text-slate-600 font-bold"},str:{claseBgLight:Y<28.5?"bg-red-50 text-red-600":"text-slate-600 font-bold"},rd:{claseBgLight:ee<72?"bg-red-50 text-red-600 font-black shadow-inner":"text-slate-600 font-bold"}}}})),G=N(()=>S.value?ne.value:ne.value.filter(c=>c.tieneBanderaRoja));function $(c,o){const d={sci:l=>l>=112?"border-green-200 bg-green-50/20":l>=102?"border-slate-100":l>=85?"border-yellow-200 bg-yellow-50/20":"border-red-200 bg-red-50/20",str:l=>l>=28.5?"border-green-200 bg-green-50/20":l>=26?"border-slate-100":l>=22?"border-yellow-200 bg-yellow-50/20":"border-red-200 bg-red-50/20",mic:l=>l>=3.8&&l<=4.2?"border-green-200 bg-green-50/20":l<3.4||l>5?"border-orange-200 bg-orange-50/20":"border-slate-100",sf:l=>l<=9?"border-green-200 bg-green-50/20":l<=11?"border-slate-100":"border-yellow-200 bg-yellow-50/20"};return d[c]?d[c](o):"border-slate-100"}function R(c,o){const d={sci:l=>l>=112?"bg-green-500 shadow-green-200":l>=102?"bg-slate-400":l>=85?"bg-yellow-500":"bg-red-500",str:l=>l>=28.5?"bg-green-500 shadow-green-200":l>=26?"bg-slate-400":l>=22?"bg-yellow-500":"bg-red-500",mic:l=>l>=3.8&&l<=4.2?"bg-green-500 shadow-green-200":l<3.4||l>5?"bg-orange-500":"bg-slate-400",sf:l=>l<=9?"bg-green-500 shadow-green-200":l<=11?"bg-slate-400":"bg-yellow-500"};return d[c]?d[c](o):"bg-slate-400"}function re(c,o){const d={sci:l=>l>=112?"text-green-600":l>=102?"text-slate-500":l>=85?"text-yellow-600":"text-red-600",str:l=>l>=28.5?"text-green-600":l>=26?"text-slate-500":l>=22?"text-yellow-600":"text-red-600",mic:l=>l>=3.8&&l<=4.2?"text-green-600":l<3.4||l>5?"text-orange-600":"text-slate-500",sf:l=>l<=9?"text-green-600":l<=11?"text-slate-500":"text-yellow-600"};return d[c]?d[c](o):"text-slate-500"}const se=N(()=>{const c=L.value,o=b.TITULOS,d=[];return Object.keys(o).forEach(l=>{const _=o[l],Y=E[_.key];let ee="border-red-200 shadow-red-50/50 hover:border-red-300",F="‚ùå",D="Riesgo de Paro Cr√≠tico",z="bg-red-50 text-red-700 border-red-200",V="";c.sci>=_.limite_sci&&c.str>=(_.limite_str||0)?(ee="border-green-200 shadow-green-50/50 hover:border-green-300",F="‚úÖ",D="Eficiencia Proyectada > 94%",z="bg-green-50 text-green-700 border-green-200"):c.sci>=_.limite_sci-5&&(ee="border-yellow-200 shadow-yellow-50/50 hover:border-yellow-300",F="‚ö†Ô∏è",D="Vigilancia en Salida de Rotor",z="bg-yellow-50 text-yellow-700 border-yellow-200"),_.key==="7"||_.key==="10Flame"||_.key==="9"?V="Apto por Cohesi√≥n de Masa: En estos t√≠tulos gruesos, el alto n√∫mero de fibras en el n√∫cleo del hilo compensa la baja resistencia individual (STR) detectada.":_.key==="12.5"&&(c.sf>13?V="Peligro de Puntos Delgados: Con un SF > 13%, el hilo de urdimbre presentar√° irregularidades de masa que causar√°n cortes por tensi√≥n en el telar.":V="Estabilidad en Urdimbre: La longitud y resistencia de la fibra aseguran un proceso fluido en el engomado y tejido."),d.push({titulo:`${_.rango}`,texto:c.sci>=_.limite_sci?_.apto:_.marginal,clase:ee,icono:F,planInfo:Y,impactoTexto:D,impactoClase:z,explicacionTecnica:V})}),d}),y=N(()=>L.value.str<24||L.value.sf>11||L.value.mic<3.5),g=N(()=>({maquina:b.MITIGACION.MAQUINA,planta:b.MITIGACION.PLANTA})),h=N(()=>{if(U.value.length===0)return{hilanderia:"Sin datos.",calidad:"Sin datos.",conclusion:"DESCONOCIDA"};const c=L.value,o=b.CONCLUSIONES,d=B.value.alerta?`

ALERTA DE MEZCLA:
${B.value.alerta}`:"",l=(c.sci<100?"SCI promedio insuficiente para r√©gimen de 90k RPM. Se prev√© saturaci√≥n de rotores y baja eficiencia operativa. Recomendaci√≥n: Reducci√≥n de carga mec√°nica a 72k RPM.":"Fibra con SCI y STR equilibrados para el plan mensual. Capacidad de respuesta √≥ptima ante reg√≠menes de 80k-90k RPM sin comprometer la continuidad operativa.")+d,_=c.mic<3.4||c.rd<65?`RIESGO DE CALIDAD EN DENIM: Micronaire bajo (${c.mic.toFixed(2)}) indica inmadurez celular avanzada; alto riesgo de 'puntos blancos' y neps durante la absorci√≥n del colorante √≠ndigo. El RD de ${c.rd.toFixed(1)} confirma degradaci√≥n por factores clim√°ticos que afectar√° la solidez.`:"Par√°metros de madurez y reflectancia √≥ptimos. Capacidad de absorci√≥n de √≠ndigo superior, garantizando tonalidades profundas y tacto premium en el acabado final del tejido.",Y=c.sci>=112&&c.mic>=3.8?o.URDIMBRE:c.sci>=102?o.STANDARD:o.RIESGO;return{hilanderia:l,calidad:_,conclusion:Y}}),P=N(()=>new Date().toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}));return(c,o)=>(r(),n("div",{ref_key:"analizadorRef",ref:X,class:"analizador-hvi bg-white text-slate-800 rounded-2xl p-8 shadow-2xl border border-slate-200 max-w-6xl mx-auto overflow-hidden"},[e("header",Be,[e("div",Oe,[o[3]||(o[3]=be('<div class="flex items-center gap-4" data-v-4b763b26><div class="p-3 bg-blue-600 rounded-2xl shadow-lg shadow-blue-200" data-v-4b763b26><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-4b763b26><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-4b763b26></path></svg></div><div data-v-4b763b26><h2 class="text-2xl font-black text-slate-900 tracking-tight" data-v-4b763b26> An√°lisis T√©cnico HVI <span class="text-blue-600 block text-sm font-bold uppercase tracking-widest mt-1" data-v-4b763b26>Matriz de Aptitud Denim Real</span></h2></div></div>',1)),e("div",ze,[e("button",{onClick:C,disabled:Q.value,class:"group flex items-center gap-2 px-6 py-3 bg-white border-2 border-slate-200 rounded-xl font-black text-[10px] uppercase tracking-widest text-slate-600 hover:border-blue-600 hover:text-blue-600 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm"},[Q.value?(r(),n("span",Ue)):(r(),n("span",He,"üì∏")),Z(" "+s(Q.value?"Generando...":"Exportar Informe"),1)],8,Ve),e("div",Ge,[o[2]||(o[2]=e("span",{class:"text-[10px] text-slate-400 uppercase font-black tracking-widest"},"Muestreo del Lote",-1)),e("p",qe,[Z(s(U.value.length)+" ",1),e("span",Ze,"/ "+s(O.pacas.length)+" fardos",1)])])])]),O.metadata&&O.metadata.loteEntrada?(r(),n("div",Je,[o[10]||(o[10]=e("div",{class:"absolute top-0 right-0 p-2 opacity-5 pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-24 w-24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.618.309a2 2 0 01-1.84.09l-1.921-.64a2 2 0 00-1.611 0l-1.921.64a2 2 0 01-1.84-.09l-.618-.309a6 6 0 00-3.86-.517l-2.387.477a2 2 0 00-1.022.547V21l3.586-3.586a2 2 0 012.828 0L24 21v-5.572z"})])],-1)),e("div",We,[o[4]||(o[4]=e("span",{class:"text-slate-400 uppercase font-black tracking-tighter text-[9px]"},"Lote Entrada:",-1)),e("p",Ke,s(O.metadata.loteEntrada),1)]),e("div",Qe,[o[5]||(o[5]=e("span",{class:"text-slate-400 uppercase font-black tracking-tighter text-[9px]"},"Proveedor:",-1)),e("p",{class:"text-slate-700 font-bold truncate",title:O.metadata.proveedor},s(O.metadata.proveedor||"N/A"),9,Xe)]),e("div",Ye,[o[6]||(o[6]=e("span",{class:"text-slate-400 uppercase font-black tracking-tighter text-[9px]"},"Grado/Tipificaci√≥n:",-1)),e("p",et,s(O.metadata.grado||"Standard"),1)]),e("div",tt,[o[7]||(o[7]=e("span",{class:"text-slate-400 uppercase font-black tracking-tighter text-[9px]"},"Fecha An√°lisis:",-1)),e("p",st,s(O.metadata.fecha||"---"),1)]),e("div",at,[o[8]||(o[8]=e("span",{class:"text-slate-400 uppercase font-black tracking-tighter text-[9px]"},"Colorimetr√≠a:",-1)),e("div",ot,[e("span",{class:m(["px-2 py-0.5 rounded text-[10px] font-black tracking-widest uppercase border",O.metadata.color?"bg-amber-100 text-amber-700 border-amber-200":"bg-slate-200 text-slate-500 border-slate-300"])},s(O.metadata.color||"Sin color"),3),O.metadata.cort?(r(),n("span",rt,"CORT "+s(O.metadata.cort),1)):k("",!0)])]),e("div",lt,[o[9]||(o[9]=e("span",{class:"text-slate-400 uppercase font-black tracking-tighter text-[9px]"},"Observaciones del Consultor:",-1)),e("p",{class:"text-slate-600 italic font-medium border-l-2 border-slate-200 pl-3 leading-relaxed",title:O.metadata.obs},s(O.metadata.obs||"No hay observaciones t√©cnicas registradas para este lote."),9,nt)])])):k("",!0),L.value.sci<85&&U.value.length>0?(r(),n("div",it,[o[14]||(o[14]=e("div",{class:"absolute top-0 left-0 w-1.5 h-full bg-red-500"},null,-1)),e("div",dt,[o[13]||(o[13]=e("span",{class:"text-3xl"},"üö´",-1)),e("div",null,[o[12]||(o[12]=e("h3",{class:"font-black text-red-700 uppercase tracking-tight"},"ALERTA CR√çTICA: Fibra Fuera de Est√°ndar",-1)),e("p",ct,[Z(" El √≠ndice SCI promedio ("+s(L.value.sci.toFixed(1))+") es insuficiente para procesos de hilatura industriales. ",1),o[11]||(o[11]=e("strong",null,"Riesgo inminente de ineficiencia operativa y rechazo de calidad.",-1))])])])])):k("",!0)]),e("section",ut,[o[21]||(o[21]=e("div",{class:"flex items-center gap-3 mb-5"},[e("div",{class:"w-2 h-6 bg-blue-600 rounded-full"}),e("h3",{class:"text-sm font-black text-slate-900 uppercase tracking-widest"},"Resumen Ejecutivo de Fibra")],-1)),e("div",pt,[(r(!0),n(J,null,W(ae.value,(d,l)=>(r(),n("div",{key:l,class:m(["p-5 rounded-2xl border bg-white shadow-sm transition-all duration-300 hover:shadow-md hover:-translate-y-1",$(l,d.value)])},[e("span",xt,s(d.label),1),e("p",bt,s(d.display),1),e("div",ft,[e("div",{class:m(["w-2 h-2 rounded-full",R(l,d.value)])},null,2),e("span",{class:m(["text-[11px] font-bold uppercase tracking-tight",re(l,d.value)])},s(d.estado),3)])],2))),128)),e("div",{class:m(["p-5 rounded-2xl border bg-white shadow-sm transition-all duration-300 hover:shadow-md hover:-translate-y-1",B.value.stdDev>12?"border-red-200 bg-red-50/50":"border-slate-100 bg-slate-50/10"])},[o[16]||(o[16]=e("span",{class:"text-[10px] text-slate-400 uppercase font-black tracking-tighter"},"Estabilidad (SCI)",-1)),e("div",gt,[o[15]||(o[15]=e("span",{class:"text-xs font-black text-slate-400"},"Œî",-1)),e("p",mt,s(B.value.delta.toFixed(0)),1)]),e("div",vt,[e("div",{class:m(["w-2 h-2 rounded-full shadow-sm",B.value.stdDev>12?"bg-red-500 shadow-red-200":"bg-green-500 shadow-green-200"])},null,2),e("span",{class:m(["text-[11px] font-bold uppercase tracking-tight",B.value.stdDev>12?"text-red-600":"text-green-600"])},s(B.value.estado)+" (SD: "+s(B.value.stdDev.toFixed(1))+") ",3)])],2),e("div",{class:m(["p-5 rounded-2xl border transition-all duration-300 shadow-sm hover:shadow-md hover:-translate-y-1",q.value.esOpaca||q.value.riesgoShading?"border-amber-200 bg-amber-50/30 font-black":"border-slate-100 bg-slate-50/10"])},[o[20]||(o[20]=e("span",{class:"text-[10px] text-slate-400 uppercase font-black tracking-tighter"},"An√°lisis de Color (Rd/+b)",-1)),e("div",ht,[q.value.esOpaca?(r(),n("div",wt,[o[17]||(o[17]=e("span",{class:"text-[8px] text-red-600 font-black uppercase"},"Fibra Opaca",-1)),e("span",yt,"Rd "+s(q.value.rd.toFixed(1)),1)])):k("",!0),q.value.riesgoShading?(r(),n("div",_t,[o[18]||(o[18]=e("span",{class:"text-[8px] text-amber-700 font-black uppercase"},"Riesgo Shading",-1)),e("span",kt,"+b "+s(q.value.plusB.toFixed(1)),1)])):k("",!0),!q.value.esOpaca&&!q.value.riesgoShading?(r(),n("div",Ct,[...o[19]||(o[19]=[e("span",{class:"text-[8px] text-green-600 font-black uppercase"},"Color Estable",-1),e("span",{class:"text-xs font-bold text-slate-600 tracking-tighter"},"Apto Indigo",-1)])])):k("",!0)]),e("div",$t,[q.value.esOpaca||q.value.riesgoShading?(r(),n("p",At," Inestabilidad en la absorci√≥n del colorante √≠ndigo. Riesgo de barramiento. ")):(r(),n("p",Et," Uniformidad crom√°tica garantizada para procesos continuos. "))])],2)])]),e("section",Rt,[o[26]||(o[26]=e("div",{class:"flex items-center gap-3 mb-5"},[e("div",{class:"w-2 h-6 bg-purple-600 rounded-full"}),e("h3",{class:"text-sm font-black text-slate-900 uppercase tracking-widest"},"Matriz de Aptitud y R√©gimen de Hilatura")],-1)),e("div",Ft,[(r(!0),n(J,null,W(se.value,(d,l)=>(r(),n("div",{key:l,class:m(["relative p-6 rounded-2xl bg-white border-2 shadow-sm transition-all hover:shadow-xl",d.clase])},[e("div",It,[e("span",St,s(d.titulo),1),e("span",Mt,s(d.icono),1)]),e("p",Tt,s(d.texto),1),d.explicacionTecnica?(r(),n("div",jt,[o[23]||(o[23]=e("div",{class:"absolute top-0 left-0 w-1 h-full bg-blue-400/50"},null,-1)),e("p",Lt,[o[22]||(o[22]=e("span",{class:"font-black not-italic text-[9px] uppercase block mb-1"},"Fundamento T√©cnico:",-1)),Z(" "+s(d.explicacionTecnica),1)])])):k("",!0),d.planInfo?(r(),n("div",Nt,[e("div",Pt,[e("div",Dt,[o[24]||(o[24]=e("span",{class:"text-[8px] text-slate-400 font-black uppercase"},"R√©gimen",-1)),e("span",Bt,s(d.planInfo.rpm.toLocaleString())+" RPM",1)]),e("div",Ot,[o[25]||(o[25]=e("span",{class:"text-[8px] text-slate-400 font-black uppercase"},"Alfa",-1)),e("span",zt,s(d.planInfo.alfa),1)])]),e("div",{class:m(["text-[10px] font-black uppercase tracking-widest px-3 py-2 rounded-xl text-center border shadow-sm",d.impactoClase])},s(d.impactoTexto),3)])):k("",!0)],2))),128))])]),e("section",Vt,[e("div",Ht,[o[27]||(o[27]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-2 h-6 bg-red-600 rounded-full"}),e("h3",{class:"text-sm font-black text-slate-900 uppercase tracking-widest"},"Control Individual de Pacas")],-1)),e("div",Ut,[A.value?(r(),n("button",{key:0,onClick:o[0]||(o[0]=d=>S.value=!S.value),class:"px-4 py-2 bg-white hover:bg-slate-50 text-slate-600 text-[10px] font-black uppercase tracking-widest rounded-xl border border-slate-200 transition-all shadow-sm active:scale-95"},s(S.value?"Solo Banderas Rojas":"Ver Todas"),1)):k("",!0),e("button",{onClick:o[1]||(o[1]=d=>A.value=!A.value),class:"px-5 py-2 bg-slate-900 hover:bg-slate-800 text-white text-[10px] font-black uppercase tracking-widest rounded-xl border border-slate-700 transition-all shadow-lg active:scale-95 flex items-center gap-2"},[e("span",null,s(A.value?"Colapsar Detalle":`Ver Detalle (${G.value.length})`),1),e("span",Gt,s(A.value?"‚ûñ":"‚ûï"),1)])])]),A.value?(r(),n("div",qt,[e("div",Zt,[e("table",Jt,[o[28]||(o[28]=e("thead",null,[e("tr",{class:"bg-slate-50 text-slate-500 font-black uppercase tracking-tighter text-[10px]"},[e("th",{class:"px-6 py-5 w-24 border-b border-slate-100"},"Fardo"),e("th",{class:"px-4 py-5 w-16 text-center border-b border-slate-100"},"SCI"),e("th",{class:"px-4 py-5 w-16 text-center border-b border-slate-100"},"MIC"),e("th",{class:"px-4 py-5 w-16 text-center border-b border-slate-100"},"MAT"),e("th",{class:"px-4 py-5 w-16 text-center border-b border-slate-100"},"SF"),e("th",{class:"px-4 py-5 w-16 text-center border-b border-slate-100"},"STR"),e("th",{class:"px-4 py-5 w-16 text-center border-b border-slate-100"},"RD"),e("th",{class:"px-6 py-5 border-b border-slate-100"},"Evaluaci√≥n Diagn√≥stica")]),e("tr",{class:"bg-blue-50/50 text-blue-600 font-black uppercase tracking-widest text-[9px] border-y border-blue-100 shadow-inner"},[e("td",{class:"px-6 py-3 italic"},"OBJETIVO URDIMBRE"),e("td",{class:"px-4 py-3 text-center"},"> 112"),e("td",{class:"px-4 py-3 text-center"},"3.8-4.5"),e("td",{class:"px-4 py-3 text-center"},"> 0.85"),e("td",{class:"px-4 py-3 text-center"},"< 9.0"),e("td",{class:"px-4 py-3 text-center"},"> 28.5"),e("td",{class:"px-4 py-3 text-center"},"> 72.0"),e("td",{class:"px-6 py-3 font-bold"},"Referencia para Lotes Premium 12/1 a 16/1")])],-1)),e("tbody",Wt,[(r(!0),n(J,null,W(G.value,d=>(r(),n("tr",{key:d.fardo,class:"hover:bg-slate-50/80 transition-colors group"},[e("td",Kt,[d.tieneBanderaRoja?(r(),n("span",Qt)):k("",!0),e("div",Xt,"#"+s(d.fardo),1),d.tieneBanderaRoja&&d.desviaciones.length>0?(r(),n("div",Yt,"Cr√≠tico")):k("",!0)]),e("td",{class:m(["px-4 py-4 font-black font-mono text-center text-sm border-x border-slate-50",d.analisis.sci.claseBgLight])},s(d.sci),3),e("td",{class:m(["px-4 py-4 font-black font-mono text-center text-sm border-x border-slate-50",d.analisis.mic.claseBgLight])},s(d.mic),3),e("td",{class:m(["px-4 py-4 font-black font-mono text-center text-sm border-x border-slate-50",d.analisis.mat.claseBgLight])},s(d.mat),3),e("td",{class:m(["px-4 py-4 font-black font-mono text-center text-sm border-x border-slate-50",d.analisis.sf.claseBgLight])},s(d.sf),3),e("td",{class:m(["px-4 py-4 font-black font-mono text-center text-sm border-x border-slate-50",d.analisis.str.claseBgLight])},s(d.str),3),e("td",{class:m(["px-4 py-4 font-black font-mono text-center text-sm border-x border-slate-50",d.analisis.rd.claseBgLight])},s(d.rd),3),e("td",es,[e("div",ts,s(d.aptitudTexto),1),e("div",ss,[(r(!0),n(J,null,W(d.desviaciones,(l,_)=>(r(),n("span",{key:_,class:m(["px-2 py-1 rounded-lg text-[9px] uppercase tracking-wide border shadow-sm",l.critica?"bg-red-50 text-red-700 border-red-100":"bg-amber-50 text-amber-700 border-amber-100"])},s(l.texto),3))),128)),d.desviaciones.length===0?(r(),n("span",as,"‚úì Norma T√©cnica OK")):k("",!0)])])]))),128)),G.value.length===0?(r(),n("tr",os,[e("td",rs,s(S.value?"No hay datos v√°lidos para procesar.":"No se detectan desviaciones cr√≠ticas en este lote."),1)])):k("",!0)])])])])):k("",!0)]),y.value?(r(),n("section",ls,[o[33]||(o[33]=e("div",{class:"flex items-center gap-3 mb-5"},[e("div",{class:"w-2 h-6 bg-cyan-600 rounded-full"}),e("h3",{class:"text-sm font-black text-slate-900 uppercase tracking-widest"},"Protocolo de Mitigaci√≥n Operativa")],-1)),e("div",ns,[e("div",is,[o[30]||(o[30]=e("div",{class:"flex items-center gap-2 mb-4"},[e("span",{class:"p-2 bg-cyan-600 rounded-lg text-white"},"‚öôÔ∏è"),e("p",{class:"text-xs font-black text-cyan-800 uppercase tracking-widest leading-none"},[Z("Ajustes de Maquina "),e("br"),e("span",{class:"text-[9px] text-cyan-600"},"(Hilatura)")])],-1)),e("ul",ds,[(r(!0),n(J,null,W(g.value.maquina,(d,l)=>(r(),n("li",{key:l,class:"flex items-start gap-4 text-xs text-slate-700 font-bold leading-relaxed group"},[o[29]||(o[29]=e("span",{class:"text-cyan-600 group-hover:scale-125 transition-transform"},"‚ú¶",-1)),Z(" "+s(d),1)]))),128))])]),e("div",cs,[o[32]||(o[32]=e("div",{class:"flex items-center gap-2 mb-4"},[e("span",{class:"p-2 bg-indigo-600 rounded-lg text-white"},"üè¢"),e("p",{class:"text-xs font-black text-indigo-800 uppercase tracking-widest leading-none"},[Z("Planta y Ambiente "),e("br"),e("span",{class:"text-[9px] text-indigo-600"},"(Preparaci√≥n)")])],-1)),e("ul",us,[(r(!0),n(J,null,W(g.value.planta,(d,l)=>(r(),n("li",{key:l,class:"flex items-start gap-4 text-xs text-slate-700 font-bold leading-relaxed group"},[o[31]||(o[31]=e("span",{class:"text-indigo-600 group-hover:scale-125 transition-transform"},"‚ú¶",-1)),Z(" "+s(d),1)]))),128))])])])])):k("",!0),e("section",ps,[o[38]||(o[38]=e("div",{class:"flex items-center gap-3 mb-5"},[e("div",{class:"w-2 h-6 bg-green-600 rounded-full"}),e("h3",{class:"text-sm font-black text-slate-900 uppercase tracking-widest"},"Diagn√≥stico Final del Consultor")],-1)),e("div",xs,[o[37]||(o[37]=e("div",{class:"absolute -right-20 -bottom-20 w-80 h-80 bg-blue-50/30 rounded-full blur-3xl pointer-events-none group-hover:bg-blue-100/40 transition-all duration-1000"},null,-1)),e("div",bs,[e("div",null,[o[34]||(o[34]=e("h4",{class:"text-blue-600 font-black text-[10px] uppercase tracking-[0.25em] mb-4 flex items-center gap-2"},[e("span",{class:"w-2 h-2 bg-blue-600 rounded-full shadow-[0_0_8px_rgba(37,99,235,0.4)]"}),Z(" Performance en Hilander√≠a ")],-1)),e("p",fs,s(h.value.hilanderia),1)]),e("div",null,[o[35]||(o[35]=e("h4",{class:"text-purple-600 font-black text-[10px] uppercase tracking-[0.25em] mb-4 flex items-center gap-2"},[e("span",{class:"w-2 h-2 bg-purple-600 rounded-full shadow-[0_0_8px_rgba(147,51,234,0.4)]"}),Z(" Aptitud en Tintorer√≠a ")],-1)),e("p",gs,s(h.value.calidad),1)])]),e("div",ms,[o[36]||(o[36]=e("span",{class:"text-[9px] text-slate-400 font-black uppercase tracking-[0.3em] mb-3"},"Conclusi√≥n Ejecutiva",-1)),e("div",vs,[e("p",hs,s(h.value.conclusion),1)])])])]),e("footer",ws,[o[40]||(o[40]=e("div",{class:"flex items-center gap-4"},[e("span",null,"STC-PRODUCCI√ìN V2.0"),e("span",{class:"text-slate-200"},"|"),e("span",null,"M√≥dulo HVI Consultor")],-1)),e("div",ys,[o[39]||(o[39]=e("span",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},null,-1)),e("span",_s,s(P.value),1)])])],512))}},Cs=ye(ks,[["__scopeId","data-v-4b763b26"]]),$s={ref:"auditRef",class:"verificar-contrato bg-white text-slate-800 rounded-2xl p-8 shadow-2xl border border-slate-200 max-w-7xl mx-auto overflow-hidden"},As={key:0,class:"flex flex-col items-center justify-center py-20"},Es={key:1},Rs={class:"mb-8 pb-6 border-b border-slate-100 flex flex-col gap-6"},Fs={class:"flex items-center justify-between gap-4"},Is={class:"flex items-center gap-4"},Ss={key:0,class:"relative group cursor-help"},Ms={class:"px-5 py-3 bg-white border-2 border-slate-200 rounded-xl shadow-sm flex items-center gap-3 hover:border-indigo-300 transition-colors"},Ts={class:"flex flex-col items-start"},js={class:"flex items-center gap-2"},Ls={class:"text-xl font-black text-slate-800"},Ns={class:"absolute top-full right-0 mt-2 w-72 bg-white rounded-xl shadow-2xl border border-slate-100 p-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50 transform translate-y-2 group-hover:translate-y-0"},Ps={class:"space-y-2 text-sm"},Ds={class:"flex justify-between items-center"},Bs={class:"flex justify-between items-center"},Os={class:"mt-2 pt-2 border-t border-slate-100 flex justify-between items-center"},zs={class:"font-black text-indigo-600"},Vs={class:"mt-3 bg-slate-50 p-2 rounded text-xs text-slate-600 leading-snug font-mono border border-slate-200"},Hs={class:"text-2xl"},Us={class:"grid grid-cols-2 md:grid-cols-4 gap-6 p-4 bg-slate-50 rounded-xl border border-slate-100 text-xs"},Gs={class:"text-slate-800 font-black font-mono text-base"},qs={class:"text-indigo-600 font-bold"},Zs={class:"col-span-2"},Js={class:"flex gap-4 mt-1"},Ws={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ks={class:"lg:col-span-1 space-y-6"},Qs={class:"bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden"},Xs={class:"p-4 space-y-5"},Ys={class:"flex justify-between items-end mb-1"},ea={class:"font-black text-slate-500 text-xs uppercase"},ta={class:"flex items-center justify-between bg-slate-50 p-2 rounded-lg border border-slate-100 relative overflow-hidden"},sa={class:"flex flex-col items-start z-10"},aa={class:"text-xs font-medium text-slate-600 font-mono"},oa={class:"flex flex-col items-end z-10"},ra={key:0,class:"text-[10px] text-red-500 mt-1 font-medium pl-1"},la={class:"lg:col-span-2 space-y-6"},na={class:"bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden"},ia={class:"px-5 py-3 bg-slate-50 border-b border-slate-100 flex items-center justify-between"},da={class:"text-[10px] text-slate-400 font-bold"},ca={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4"},ua={class:"flex justify-between items-start mb-2"},pa={class:"font-black text-slate-700"},xa={key:0,class:"relative pt-2"},ba={class:"h-2 bg-slate-200 rounded-full overflow-hidden"},fa={class:"flex justify-between mt-1 text-[9px] font-bold text-slate-400"},ga={key:1,class:"relative pt-2"},ma={key:2,class:"text-[10px] text-red-600 font-bold mt-2"},va={class:"bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden"},ha={class:"overflow-x-auto max-h-60"},wa={key:0,class:"w-full text-left text-xs"},ya={class:"divide-y divide-slate-100"},_a={class:"px-4 py-2 font-mono font-bold text-slate-700"},ka={class:"px-4 py-2 font-black text-slate-800"},Ca={class:"px-4 py-2 text-right font-mono text-red-600 font-bold"},$a={class:"px-4 py-2"},Aa={key:1,class:"p-8 text-center text-slate-400 font-medium italic"},Ea={__name:"VerificarContrato",props:{pacas:{type:Array,required:!0},metadata:{type:Object,default:()=>({})}},setup(O){const I=O,S=T(!0),A=T(null),Q=T(""),X=N(()=>!A.value||!A.value.parameterResults?{}:A.value.parameterResults),C=N(()=>{if(!A.value)return[];const y=[];return Object.entries(A.value.parameterResults).forEach(([g,h])=>{h.failedBales&&h.failedBales.length>0&&h.failedBales.forEach(P=>{y.push({...P,param:g})})}),y}),E=N(()=>A.value?!A.value.details.some(g=>g.includes("Dispersi√≥n")||g.includes("fuera de rango")):!0),b=N(()=>{if(!A.value)return!0;const y=A.value.details.filter(g=>!g.includes("Dispersi√≥n")&&!g.includes("fuera de rango"));return!(A.value.overallStatus==="RECHAZO"&&y.length>0)}),te=N(()=>A.value?A.value.overallStatus==="IDEAL"?"APROBADO":A.value.overallStatus:"---"),le=N(()=>{if(!A.value)return"";const y=A.value.overallStatus;return y==="IDEAL"?"bg-green-100 border-green-200 text-green-700":y==="RECHAZO"?"bg-red-100 border-red-200 text-red-700":"bg-amber-100 border-amber-200 text-amber-700"}),U=N(()=>A.value?A.value.overallStatus==="IDEAL"?"‚úÖ":A.value.overallStatus==="RECHAZO"?"‚õî":"‚ö†Ô∏è":"‚ùî"),L=N(()=>A.value?A.value.argentineGrade:null),ae=N(()=>{if(!L.value)return"-";const y=L.value.components.rd.score,g=L.value.components.plusB.score,h=Math.min(y,g);return y===h?L.value.components.rd.grade:L.value.components.plusB.grade});function q(y){return y?y.startsWith("C")?"text-green-600":y.startsWith("D")?"text-amber-600":"text-red-600":"text-slate-400"}function B(y){return y.status==="IDEAL"?"bg-green-100 text-green-700":y.status==="RECHAZO"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}function ne(y){return y.status==="IDEAL"?"bg-green-500":y.status==="RECHAZO"?"bg-red-500":"bg-amber-500"}function G(y){return y.status==="IDEAL"?"text-green-600":y.status==="RECHAZO"?"text-red-600":"text-amber-600"}function $(y){return y.status}function R(y){return y?y.minAvg?`> ${y.minAvg}`:y.maxAvg?`< ${y.maxAvg}`:"---":"N/A"}function re(y){return y.issues.every(g=>g.includes("Dispersi√≥n"))}const se=async()=>{if(!(!I.pacas||I.pacas.length===0)){S.value=!0;try{const g=await(await fetch("http://localhost:3001/api/config/audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bales:I.pacas.map(h=>({...h,LOTE:h.fardo})),version_nombre:"Est√°ndar 2026"})})).json();g.success&&(A.value=g.data)}catch(y){console.error("Error auditando:",y)}finally{S.value=!1}}};return _e(()=>{se()}),$e(()=>I.pacas,()=>{se()},{deep:!0}),(y,g)=>(r(),n("div",$s,[S.value?(r(),n("div",As,[...g[0]||(g[0]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-600 mb-4"},null,-1),e("p",{class:"text-slate-500 font-bold animate-pulse"},"Auditando Lote contra Est√°ndares...",-1)])])):(r(),n("div",Es,[e("header",Rs,[e("div",Fs,[g[7]||(g[7]=be('<div class="flex items-center gap-4" data-v-41302bd0><div class="p-3 bg-indigo-600 rounded-2xl shadow-lg shadow-indigo-200" data-v-41302bd0><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-41302bd0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-41302bd0></path></svg></div><div data-v-41302bd0><h2 class="text-2xl font-black text-slate-900 tracking-tight" data-v-41302bd0> Auditor√≠a de Cumplimiento Contractual <span class="text-indigo-600 block text-sm font-bold uppercase tracking-widest mt-1" data-v-41302bd0>An√°lisis de Penalizaci√≥n y Rechazo</span></h2></div></div>',1)),e("div",Is,[L.value?(r(),n("div",Ss,[e("div",Ms,[e("div",Ts,[g[2]||(g[2]=e("span",{class:"text-[10px] uppercase font-bold text-slate-400 tracking-wider"},"Grado Sugerido (S.A.)",-1)),e("div",js,[e("span",Ls,s(L.value.finalGrade),1),g[1]||(g[1]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1))])])]),e("div",Ns,[g[6]||(g[6]=e("h4",{class:"text-sm font-bold text-slate-800 mb-2 border-b pb-2"},"Desglose T√©cnico",-1)),e("div",Ps,[e("div",Ds,[g[3]||(g[3]=e("span",{class:"text-slate-500"},"Color (Rd, +b):",-1)),e("span",{class:m(["font-mono font-bold",q(ae.value)])},s(ae.value),3)]),e("div",Bs,[g[4]||(g[4]=e("span",{class:"text-slate-500"},"Basura (Tr):",-1)),e("span",{class:m(["font-mono font-bold",q(L.value.components.trash.grade)])},s(L.value.components.trash.grade),3)]),e("div",Os,[g[5]||(g[5]=e("span",{class:"font-bold text-slate-700"},"Veredicto Final:",-1)),e("span",zs,s(L.value.finalGrade),1)])]),e("div",Vs,s(L.value.diagnostic),1)])])):k("",!0),e("div",{class:m(["px-6 py-3 rounded-xl border-2 shadow-sm uppercase font-black tracking-widest text-sm flex items-center gap-3",le.value])},[e("span",Hs,s(U.value),1),Z(" "+s(te.value),1)],2)])]),e("div",Us,[e("div",null,[g[8]||(g[8]=e("span",{class:"block text-slate-400 font-bold uppercase tracking-wider text-[10px]"},"Lote / Fardos",-1)),e("span",Gs,s(O.metadata.loteEntrada||"N/A")+" ("+s(O.pacas.length)+")",1)]),e("div",null,[g[9]||(g[9]=e("span",{class:"block text-slate-400 font-bold uppercase tracking-wider text-[10px]"},"Configuraci√≥n",-1)),e("span",qs,s(Q.value||"Est√°ndar 2026"),1)]),e("div",Zs,[g[10]||(g[10]=e("span",{class:"block text-slate-400 font-bold uppercase tracking-wider text-[10px]"},"Estado Preeliminar",-1)),e("div",Js,[e("span",{class:m(["text-[11px] font-bold",E.value?"text-green-600":"text-red-600"])},s(E.value?"‚úÖ Mezcla Homog√©nea (Apta para Producci√≥n)":"‚ùå Mezcla Irregular (Riesgo Operativo)"),3),e("span",{class:m(["text-[11px] font-bold",b.value?"text-green-600":"text-red-600"])},s(b.value?"‚úÖ Cumplimiento Comercial":"‚ùå Incumplimiento Contractual"),3)])])])]),e("div",Ws,[e("div",Ks,[e("div",Qs,[g[14]||(g[14]=e("div",{class:"px-5 py-3 bg-slate-50 border-b border-slate-100 flex items-center justify-between"},[e("h3",{class:"font-bold text-slate-700 text-sm uppercase tracking-wide"},"Promedio Contrato vs Real"),e("span",{class:"text-[10px] text-slate-400 font-bold"},"AVG CHECK")],-1)),e("div",Xs,[(r(!0),n(J,null,W(X.value,(h,P)=>(r(),n("div",{key:P,class:"relative group"},[e("div",Ys,[e("span",ea,s(P),1),e("span",{class:m(["text-[10px] uppercase font-bold px-2 py-0.5 rounded",B(h)])},s($(h)),3)]),e("div",ta,[e("div",{class:m(["absolute bottom-0 left-0 h-1 bg-current transition-all",ne(h)]),style:{width:"100%"}},null,2),e("div",sa,[g[11]||(g[11]=e("span",{class:"text-[9px] text-slate-400 font-bold uppercase"},"Objetivo",-1)),e("span",aa,s(R(h.targets)),1)]),g[13]||(g[13]=e("div",{class:"text-xl text-slate-300 font-light"},"vs",-1)),e("div",oa,[g[12]||(g[12]=e("span",{class:"text-[9px] text-slate-400 font-bold uppercase"},"Real",-1)),e("span",{class:m(["text-xl font-black font-mono",G(h)])},s(h.avg),3)])]),h.status==="RECHAZO"&&!re(h)?(r(),n("p",ra," üö® Desviaci√≥n de promedio significativa. Aplica penalizaci√≥n comercial. ")):k("",!0)]))),128))])])]),e("div",la,[e("div",na,[e("div",ia,[g[15]||(g[15]=e("h3",{class:"font-bold text-slate-700 text-sm uppercase tracking-wide"},"Zona de Penalizaci√≥n (Distribuci√≥n)",-1)),e("span",da,"TOLERANCIA "+s(Q.value),1)]),e("div",ca,[(r(!0),n(J,null,W(X.value,(h,P)=>(r(),n("div",{key:"dist-"+P,class:m(["p-4 rounded-xl border bg-slate-50/50 flex flex-col justify-between",h.distribution&&h.distribution.outliersPct>100-(h.targets.minIdealPct||80)?"border-red-200 bg-red-50":"border-slate-200"])},[e("div",ua,[e("span",pa,s(P),1),e("span",{class:m(["text-[10px] font-bold px-2 py-1 rounded bg-white border",h.distribution&&h.distribution.outliersPct>100-(h.targets.minIdealPct||80)?"text-red-600 border-red-200":"text-slate-500 border-slate-200"])},s(h.distribution?h.distribution.outliersPct:0)+"% Fuera ",3)]),h.distribution?(r(),n("div",xa,[e("div",ba,[e("div",{class:m(["h-full transition-all duration-1000",h.distribution&&h.distribution.outliersPct>100-(h.targets.minIdealPct||80)?"bg-red-500":"bg-green-500"]),style:je({width:Math.min((h.distribution?h.distribution.outliersPct:0)*2,100)+"%"})},null,6)]),e("div",fa,[g[16]||(g[16]=e("span",null,"0%",-1)),e("span",null,"Max "+s(100-(h.targets.minIdealPct||80))+"%",1)])])):(r(),n("div",ga,[...g[17]||(g[17]=[e("span",{class:"text-[9px] text-slate-400 italic"},"Sin datos de distribuci√≥n",-1)])])),h.distribution&&h.distribution.outliersPct>100-(h.targets.minIdealPct||80)?(r(),n("p",ma," ‚õî Exceso de fardos en zona de penalizaci√≥n. Lote Heterog√©neo. ")):k("",!0)],2))),128))])]),e("div",va,[g[19]||(g[19]=e("div",{class:"px-5 py-3 bg-red-50 border-b border-red-100 flex items-center justify-between"},[e("h3",{class:"font-bold text-red-800 text-sm uppercase tracking-wide"},"Fardos Rechazados (Hard Cap / Tolerancia)"),e("span",{class:"text-[10px] text-red-400 font-bold"},"EXCLUSI√ìN INDIVIDUAL")],-1)),e("div",ha,[C.value.length>0?(r(),n("table",wa,[g[18]||(g[18]=e("thead",{class:"bg-slate-50 sticky top-0 text-slate-500 font-bold uppercase"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Fardo"),e("th",{class:"px-4 py-2"},"Par√°metro"),e("th",{class:"px-4 py-2 text-right"},"Valor"),e("th",{class:"px-4 py-2"},"Motivo")])],-1)),e("tbody",ya,[(r(!0),n(J,null,W(C.value,(h,P)=>(r(),n("tr",{key:P,class:"hover:bg-red-50/50"},[e("td",_a,s(h.id),1),e("td",ka,s(h.param),1),e("td",Ca,s(h.val),1),e("td",$a,[e("span",{class:m(["px-2 py-0.5 rounded text-[9px] font-black uppercase tracking-wider",h.reason.includes("Hard")?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"])},s(h.reason),3)])]))),128))])])):(r(),n("div",Aa," ‚ú® Ning√∫n fardo ha violado los l√≠mites absolutos ni de tolerancia. "))])])])])]))],512))}},Ra=ye(Ea,[["__scopeId","data-v-41302bd0"]]),Fa={class:"bg-white rounded-2xl p-8 shadow-2xl border border-slate-200 max-w-6xl mx-auto my-8"},Ia={class:"flex items-center justify-between mb-8 pb-6 border-b border-slate-100"},Sa=["disabled"],Ma={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},Ta={key:0,class:"mb-8 space-y-3"},ja={class:"text-red-800 font-black text-sm uppercase"},La={class:"text-red-600 text-xs font-medium"},Na={class:"overflow-hidden border border-slate-200 rounded-2xl shadow-sm"},Pa={class:"w-full text-left text-xs border-collapse"},Da={class:"divide-y divide-slate-50"},Ba={class:"px-6 py-5"},Oa={class:"flex flex-col"},za={class:"text-slate-900 font-black text-sm"},Va={class:"text-slate-400 font-bold text-[10px] uppercase"},Ha={class:"px-4 py-5 text-center"},Ua={class:"flex flex-col items-center"},Ga={class:"text-slate-700 font-bold border-b border-slate-100 pb-1 mb-1 w-full"},qa={class:"px-4 py-5 text-center"},Za={class:"flex flex-col items-center"},Ja={class:"text-slate-700 font-bold border-b border-slate-100 pb-1 mb-1 w-full"},Wa={class:"px-4 py-5 text-center"},Ka={class:"flex flex-col items-center"},Qa={class:"text-slate-700 font-bold border-b border-slate-100 pb-1 mb-1 w-full"},Xa={class:"px-4 py-5 text-center max-w-50"},Ya={key:0,class:"text-[10px] text-red-600 font-black uppercase leading-tight"},eo={key:1,class:"text-[10px] text-slate-400 font-bold italic"},to={class:"px-6 py-5 text-center"},so={key:0},ao={__name:"EnsayoHVICompare",setup(O){const I=T([]),S=T(!1),A=async()=>{S.value=!0;try{const E=await(await fetch("/api/hvi/comparacion-muestra")).json();E.success&&(I.value=E.data)}catch(C){console.error("Error cargando comparativa HVI:",C)}finally{S.value=!1}},Q=N(()=>I.value.filter(C=>C.critico).map(C=>{const E=[];return parseFloat(C.var_sci)<-5&&E.push(`SCI (${C.var_sci})`),parseFloat(C.var_str)<-5&&E.push(`STR (${C.var_str})`),parseFloat(C.var_sf)>5&&E.push(`SF (${C.var_sf})`),{lote:C.lote,detalle_var:E.join(", ")}})),X=(C,E=!1)=>{const b=parseFloat(C);return E?b>5?"text-red-600":b>2?"text-orange-500":"text-green-600":b<-5?"text-red-600":b<-2?"text-orange-500":"text-green-600"};return _e(()=>{A()}),(C,E)=>(r(),n("div",Fa,[e("div",Ia,[E[0]||(E[0]=be('<div class="flex items-center gap-4"><div class="p-3 bg-indigo-600 rounded-2xl shadow-lg shadow-indigo-200"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><div><h2 class="text-2xl font-black text-slate-900 tracking-tight"> Comparativa de Calidad HVI <span class="text-indigo-600 block text-sm font-bold uppercase tracking-widest mt-1">Muestra Aprobada vs. Entrega de Lote</span></h2></div></div>',1)),e("button",{onClick:A,disabled:S.value,class:"flex items-center gap-2 px-6 py-3 bg-slate-900 text-white rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-slate-800 transition-all active:scale-95 disabled:opacity-50"},[S.value?(r(),n("span",Ma)):k("",!0),Z(" "+s(S.value?"Consultando...":"Actualizar Comparativa"),1)],8,Sa)]),Q.value.length>0?(r(),n("div",Ta,[(r(!0),n(J,null,W(Q.value,(b,te)=>(r(),n("div",{key:te,class:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-4 animate-pulse"},[E[1]||(E[1]=e("span",{class:"text-2xl"},"‚ö†Ô∏è",-1)),e("div",null,[e("p",ja,"Reclamo Pendiente: Lote "+s(b.lote),1),e("p",La,"La entrega es inferior a la muestra en "+s(b.detalle_var),1)])]))),128))])):k("",!0),e("div",Na,[e("table",Pa,[E[3]||(E[3]=e("thead",null,[e("tr",{class:"bg-slate-50 text-slate-500 font-black uppercase tracking-tighter text-[10px] border-b border-slate-100"},[e("th",{class:"px-6 py-4"},"Lote / Muestra"),e("th",{class:"px-4 py-4 text-center"},"SCI (Mue | Ent)"),e("th",{class:"px-4 py-4 text-center"},"STR (Mue | Ent)"),e("th",{class:"px-4 py-4 text-center"},"SF % (Mue | Ent)"),e("th",{class:"px-4 py-4 text-center"},"Var. Cr√≠tica"),e("th",{class:"px-6 py-4 text-center"},"Estado de Aceptaci√≥n")])],-1)),e("tbody",Da,[(r(!0),n(J,null,W(I.value,b=>(r(),n("tr",{key:b.lote,class:"hover:bg-slate-50/50 transition-colors"},[e("td",Ba,[e("div",Oa,[e("span",za,"Lote: "+s(b.lote),1),e("span",Va,"Ref. Muestra: "+s(b.muestra),1)])]),e("td",Ha,[e("div",Ua,[e("span",Ga,s(b.sci_mue)+" | "+s(b.sci_ent),1),e("span",{class:m(["text-[10px] font-black uppercase",X(b.var_sci)])},s(b.var_sci),3)])]),e("td",qa,[e("div",Za,[e("span",Ja,s(b.str_mue)+" | "+s(b.str_ent),1),e("span",{class:m(["text-[10px] font-black uppercase",X(b.var_str)])},s(b.var_str),3)])]),e("td",Wa,[e("div",Ka,[e("span",Qa,s(b.sf_mue)+" | "+s(b.sf_ent),1),e("span",{class:m(["text-[10px] font-black uppercase",X(b.var_sf,!0)])},s(b.var_sf),3)])]),e("td",Xa,[b.critico?(r(),n("span",Ya,s(b.alerta),1)):(r(),n("span",eo,"Dentro de norma"))]),e("td",to,[e("div",{class:m(["px-4 py-2 rounded-xl text-[10px] font-black border tracking-widest transition-all",b.critico?"bg-red-50 text-red-700 border-red-200":"bg-green-50 text-green-700 border-green-200 shadow-sm"])},s(b.estado),3)])]))),128)),I.value.length===0&&!S.value?(r(),n("tr",so,[...E[2]||(E[2]=[e("td",{colspan:"6",class:"px-6 py-20 text-center text-slate-400 font-bold italic"}," No se encontraron vinculaciones tipo 'Muestra' vs 'Entrega' registradas. ",-1)])])):k("",!0)])])])]))}},oo={class:"flex flex-col w-full h-screen p-4 bg-slate-50 overflow-hidden"},ro={class:"mb-4 shrink-0 flex items-center justify-between gap-2"},lo={class:"flex items-center gap-2 flex-1 max-w-2xl justify-end"},no={class:"relative flex-1 group max-w-md"},io=["disabled","title"],co={class:"flex flex-col flex-1 gap-4 overflow-hidden min-h-0"},uo={class:"bg-white rounded-xl shadow-md border border-slate-200 overflow-hidden flex flex-col h-[35%] shrink-0"},po={class:"px-4 py-2 bg-slate-50 border-b border-slate-200 flex items-center gap-4 shrink-0"},xo={class:"flex items-center gap-3"},bo=["value"],fo={class:"text-[11px] font-medium text-slate-600 group-hover:text-blue-600 transition-colors"},go={class:"overflow-auto flex-1 h-full"},mo={class:"w-full text-left border-collapse table-fixed"},vo={class:"divide-y divide-slate-100"},ho=["onClick"],wo={class:"px-1 py-2 text-xs"},yo={class:"px-1 py-2 text-xs font-mono text-slate-700"},_o=["title"],ko={class:"px-1 py-2 text-xs text-slate-600 truncate"},Co=["onUpdate:modelValue"],$o=["onUpdate:modelValue","readonly"],Ao=["onUpdate:modelValue"],Eo=["value"],Ro=["onUpdate:modelValue","disabled"],Fo=["value"],Io=["onUpdate:modelValue"],So={class:"flex items-center justify-center gap-1.5"},Mo=["onClick","disabled"],To=["onClick","disabled"],jo={class:"px-1 py-2 text-xs text-center"},Lo={key:0,title:"Guardado",class:"flex justify-center"},No={key:1,title:"Pendiente de guardar",class:"flex justify-center"},Po={key:0},Do={class:"bg-slate-50 border-t border-slate-200 px-3 py-2 shrink-0 flex justify-between items-center text-[10px]"},Bo={class:"text-slate-500"},Oo={class:"bg-white rounded-xl shadow-md border border-slate-200 overflow-hidden flex flex-col flex-1 min-w-0"},zo={key:0,class:"bg-slate-50 px-4 py-2 border-b border-slate-200 flex justify-between items-center shrink-0"},Vo={class:"flex items-center gap-3 flex-1"},Ho={class:"text-xs font-bold text-slate-700 truncate"},Uo={class:"text-blue-600"},Go={class:"flex items-center gap-2"},qo={key:1,class:"relative group"},Zo=["disabled"],Jo={key:0,class:"animate-spin text-[10px]"},Wo={key:1},Ko=["disabled"],Qo={key:0,class:"animate-spin text-[10px]"},Xo={key:1},Yo={class:"overflow-auto flex-1 h-full"},er={class:"w-full text-left border-collapse table-fixed min-w-300"},tr={class:"divide-y divide-slate-100"},sr={class:"px-4 py-2 text-xs font-mono text-slate-700 relative"},ar={key:0,class:"absolute -right-1 top-0 flex flex-col gap-0.5"},or=["title"],rr={class:"px-4 py-2 text-xs text-slate-600"},lr={class:"px-4 py-2 text-xs text-slate-600"},nr={class:"px-4 py-2 text-xs text-slate-600"},ir={class:"px-4 py-2 text-xs text-slate-600"},dr={class:"px-4 py-2 text-xs text-slate-600"},cr={key:0},ur={key:0,class:"sticky bottom-0 z-10 bg-blue-50 border-t-2 border-blue-200"},pr={class:"font-bold text-blue-900 shadow-[0_-2px_4px_rgba(0,0,0,0.05)]"},xr={class:"px-4 py-3 text-xs bg-blue-100/50"},br=["title"],fr={class:"px-4 py-3 text-xs"},gr=["title"],mr={class:"px-4 py-3 text-xs"},vr=["title"],hr=["title"],wr=["title"],yr=["title"],_r={class:"px-4 py-3 text-xs"},kr=["title"],Cr=["title"],$r={class:"px-4 py-3 text-xs"},Ar=["title"],Er=["title"],Rr={class:"px-4 py-3 text-xs"},Fr={key:1,class:"mt-3 px-3 py-2 bg-slate-50 rounded-lg border border-slate-200"},Ir={key:0,class:"mt-2 pt-2 border-t border-slate-200 flex flex-wrap gap-3 text-xs"},Sr={key:0,class:"px-2 py-1 bg-red-100 text-red-700 rounded font-medium"},Mr={key:1,class:"px-2 py-1 bg-purple-100 text-purple-700 rounded font-medium"},Tr={key:2,class:"px-2 py-1 bg-amber-100 text-amber-700 rounded font-medium"},jr={class:"relative w-full max-w-5xl max-h-[90vh] overflow-auto rounded-2xl shadow-2xl"},Lr={key:0,class:"fixed inset-0 z-60 flex items-center justify-center bg-slate-900/40 backdrop-blur-md p-4 animate-in fade-in duration-300"},Nr={class:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-7xl max-h-[90vh] overflow-auto relative"},Pr={class:"relative w-full max-w-7xl max-h-[90vh] overflow-auto rounded-2xl shadow-2xl bg-white"},Dr={key:0,class:"fixed inset-0 z-100 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm"},Br={class:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[85vh]"},Or={class:"px-6 py-4 bg-linear-to-br from-purple-700 via-indigo-800 to-blue-900 text-white flex justify-between items-center"},zr={class:"p-8 overflow-auto bg-slate-50 min-h-75"},Vr={key:0,class:"flex flex-col items-center justify-center py-20"},Hr={key:1,class:"text-sm text-slate-700 leading-relaxed whitespace-pre-line font-medium italic"},Ur={class:"px-6 py-3 bg-white border-t flex justify-between items-center text-[10px] text-slate-400 font-mono"},Gr={__name:"HVI",setup(O){const I={SCI:{min_excelente:120,min_aceptable:100,critico:85},STR:{min_excelente:30,min_aceptable:27,critico:24},SF:{max_excelente:7.5,max_aceptable:11,critico:13.5},UI:{min_excelente:83,min_aceptable:81,critico:79},UHML:{min_excelente:28.5,min_aceptable:27,critico:25.5},MIC:{rango_premium:[3.8,4.2],rango_aceptable:[3.5,4.9],descuento_por_madurez:3.4,descuento_por_finura:5},RD:{min_excelente:75,min_aceptable:70,critico:65},PLUS_B:{max_excelente:8.5,max_aceptable:10.5,critico:12},TRAR:{max_excelente:.35,max_aceptable:.55,critico:.8}};function S(a,t){const u=parseFloat(a);return isNaN(u)?"sin-dato":u>=t.min_excelente?"excelente":u>=t.min_aceptable?"aceptable":u>=t.critico?"critico":"fuera"}function A(a,t){const u=parseFloat(a);return isNaN(u)?"sin-dato":u<=t.max_excelente?"excelente":u<=t.max_aceptable?"aceptable":u<=t.critico?"critico":"fuera"}function Q(a){const t=parseFloat(a);if(isNaN(t))return"sin-dato";const u=I.MIC;return t>=u.rango_premium[0]&&t<=u.rango_premium[1]?"premium":t>=u.rango_aceptable[0]&&t<=u.rango_aceptable[1]?"aceptable":t<u.descuento_por_madurez?"riesgo-tenido":t>u.descuento_por_finura?"fibra-gruesa":"fuera"}function X(a){const t=[],u=parseFloat(a.str),v=parseFloat(a.sf),p=parseFloat(a.mic),f=parseFloat(a.rd);if(parseFloat(a.sci),!isNaN(u)&&u<I.STR.critico&&t.push({tipo:"bandera-roja",mensaje:`STR cr√≠tico (${u} < ${I.STR.critico})`}),!isNaN(v)&&v>I.SF.critico&&t.push({tipo:"bandera-roja",mensaje:`SF cr√≠tico (${v} > ${I.SF.critico})`}),!isNaN(p)){const w=I.MIC;(p<w.rango_aceptable[0]||p>w.rango_aceptable[1])&&t.push({tipo:"riesgo-tenido",mensaje:`MIC fuera de rango (${p})`})}return!isNaN(f)&&f<I.RD.min_aceptable&&t.push({tipo:"fibra-opaca",mensaje:`RD bajo (${f} < 70) - Posible da√±o por humedad`}),t}function C(a){return{excelente:"bg-green-100 text-green-800",premium:"bg-green-100 text-green-800",aceptable:"bg-yellow-50 text-yellow-800",critico:"bg-orange-100 text-orange-800",fuera:"bg-red-100 text-red-800","riesgo-tenido":"bg-purple-100 text-purple-800","fibra-gruesa":"bg-orange-100 text-orange-800","sin-dato":"text-slate-400"}[a]||""}function E(a){const t=I;return{sci:S(a.sci,t.SCI),str:S(a.str,t.STR),sf:A(a.sf,t.SF),ui:S(a.ui,t.UI),uhml:S(a.uhml,t.UHML),mic:Q(a.mic),rd:S(a.rd,t.RD),plusB:A(a.plusB,t.PLUS_B),trAr:A(a.trAr,t.TRAR),alertas:X(a)}}const b=a=>({sci:"SCI",mic:"MIC",mat:"MAT",uhml:"LEN",ui:"UNF",sf:"SFI",str:"STR",elg:"ELG",rd:"RD",plusB:"+b",trCnt:"TRASH"})[a]||a.toUpperCase(),te=T(localStorage.getItem("hvi_last_folder_path")||""),le=T(!1),U=T(!1),L=T(!1),ae=T([]),q=T(null),B=T([]),ne=T(!1),G=T(""),$=T(null),R=T([]),re=T("No guardados");$e(R,a=>{a&&a.length>0?o(!1):P.value=null});const se=T(""),y=T("gemini-2.0-flash"),g=T(!1),h=T(!1),P=T(null),c=T(!1),o=async(a=!1)=>{if(R.value.length){c.value=!0,P.value=null;try{const u=await(await fetch("http://localhost:3001/api/config/audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bales:R.value.map(v=>({...v,LOTE:v.fardo})),version_nombre:"Est√°ndar 2026"})})).json();if(u.success)if(P.value=u.data,u.data.overallStatus==="RECHAZO"){const v=u.data.details.some(f=>f.includes("Dispersi√≥n Alta"));let p="El lote no cumple con los est√°ndares de mezcla configurados.";v?(p="ALERTA DE MEZCLA: Lote rechazado por exceso de fardos en zona de tolerancia (> 20%).",se.value=p+" Revise celdas rojas de MIC/SCI."):(p="Violaciones de l√≠mites absolutos (Hard Cap) o promedios detectadas.",se.value=u.data.details.join(`
`)),a===!0&&H.fire({title:"Lote Rechazado por Auditor√≠a",html:`<div class="text-left text-sm">${u.data.details.map(f=>`‚Ä¢ ${f}`).join("<br>")}</div>`,icon:"error",confirmButtonText:"Entendido"})}else u.data.overallStatus==="ADVERTENCIA"?a===!0&&H.fire({title:"Advertencia de Calidad",text:"El lote presenta desviaciones menores en la distribuci√≥n.",icon:"warning"}):a===!0&&H.fire({title:"Lote Aprobado",text:"Cumple con Est√°ndar 2026 (Promedios, Hard Caps y Distribuci√≥n)",icon:"success",timer:2e3,showConfirmButton:!1})}catch(t){console.error("Audit error",t),H.fire("Error","No se pudo conectar con el servicio de auditor√≠a","error")}finally{c.value=!1}}},d=a=>{if(!P.value||!P.value.parameterResults[a])return null;const t=P.value.parameterResults[a];let u=`Promedio: ${t.avg} (${t.status})`;return t.hardCapViolations>0&&(u+=` | HARD CAP: ${t.hardCapViolations} pacas`),t.distribution&&t.distribution.outliersPct>0&&(u+=` | Fuera Rango: ${t.distribution.outliersPct}%`),u},l=(a,t)=>{if(!P.value||!P.value.parameterResults[a])return t;const u=P.value.parameterResults[a].status;return u==="RECHAZO"?"bg-red-600 text-white font-black animate-pulse":u==="ADVERTENCIA"?"bg-amber-100 text-amber-800":t},_=(a,t)=>{if(!P.value)return!1;const u=P.value.parameterResults[t];return!u||!u.failedBales?!1:u.failedBales.some(v=>v.id==a)},Y=async()=>{if(!$.value||!R.value.length){H.fire({icon:"warning",title:"Seleccione un archivo",text:"Debe seleccionar un archivo con datos para realizar el an√°lisis de IA."});return}g.value=!0,h.value=!0,se.value="";try{const a=$.value.loteEntrada,t=B.value.filter(p=>p.loteEntrada===a).map(p=>p.tipo),v=await(await fetch("http://localhost:3001/api/hvi/predecir-hilatura",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:y.value,lote:a,proveedor:$.value.proveedor,pacas:R.value,metadata:{grado:$.value.grado,tipo:$.value.tipo},contexto:t})})).json();v.success?se.value=v.insight:se.value="Error en el an√°lisis: "+(v.error||"Respuesta inv√°lida")}catch(a){console.error("Error al conectar con IA:",a),se.value="Error cr√≠tico al conectar con el servidor de an√°lisis Gemini 3."}finally{g.value=!1}},ee=N(()=>re.value==="Todos"?B.value:re.value==="Guardados"?B.value.filter(a=>a.estado==="Procesado"):re.value==="No guardados"?B.value.filter(a=>a.estado==="Pendiente"):B.value),F=N(()=>{if(!R.value.length)return{};const a=["sci","mst","mic","mat","uhml","ui","sf","str","elg","rd","plusB","tipo","trCnt","trAr","trid"],t={};a.forEach(p=>t[p]=0);let u={};a.forEach(p=>u[p]=0),R.value.forEach(p=>{a.forEach(f=>{const w=parseFloat(p[f]);isNaN(w)||(t[f]+=w,u[f]++)})});const v={};return a.forEach(p=>{if(u[p]>0){const f=t[p]/u[p];let w=2;["sci","mst","tipo"].includes(p)&&(w=1),["trCnt","trid"].includes(p)&&(w=0),p==="tipo"?v[p]=f.toFixed(w):v[p]=f.toFixed(w).replace(".",",")}else v[p]="-"}),v}),D=N(()=>{if(!R.value.length)return{total:0,banderaRoja:0,riesgoTenido:0,fibraOpaca:0};let a=0,t=0,u=0;return R.value.forEach(v=>{const p=X(v);p.some(f=>f.tipo==="bandera-roja")&&a++,p.some(f=>f.tipo==="riesgo-tenido")&&t++,p.some(f=>f.tipo==="fibra-opaca")&&u++}),{total:a+t+u,banderaRoja:a,riesgoTenido:t,fibraOpaca:u}});function z(){return new Promise((a,t)=>{const u=window.indexedDB.open("carga-hvi",1);u.onupgradeneeded=()=>{const v=u.result;v.objectStoreNames.contains("handles")||v.createObjectStore("handles")},u.onsuccess=()=>a(u.result),u.onerror=()=>t(u.error)})}async function V(a){const t=await z();return new Promise((u,v)=>{const w=t.transaction("handles","readwrite").objectStore("handles").put(a,"dir");w.onsuccess=()=>u(!0),w.onerror=()=>v(w.error)})}async function de(){const a=await z();return new Promise((t,u)=>{const f=a.transaction("handles","readonly").objectStore("handles").get("dir");f.onsuccess=()=>t(f.result),f.onerror=()=>u(f.error)})}async function fe(a){if(!a)return!1;try{if(await a.queryPermission({mode:"read"})==="granted"||await a.requestPermission({mode:"read"})==="granted")return!0}catch(t){console.warn("verifyPermission error",t)}return!1}const ge=()=>{localStorage.setItem("hvi_last_folder_path",te.value)},Ae=async()=>{if("showDirectoryPicker"in window)try{const a=await window.showDirectoryPicker();await V(a),ne.value=!0,te.value=a.name,ge(),await me(a);return}catch(a){console.warn("showDirectoryPicker error or cancelled",a)}q.value&&q.value.click()};async function me(a){const t=[];try{for await(const[u,v]of a.entries())v.kind==="file"&&u.toLowerCase().endsWith(".txt")&&t.push(ke(u,v));if(t.length>0)try{const v=await(await fetch("/api/hvi/check-files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileNames:t.map(p=>p.fileName)})})).json();if(v.success&&(t.forEach(p=>{v.existingNames.includes(p.fileName)&&(p.estado="Procesado")}),v.existingNames.length>0))try{const f=await(await fetch("/api/hvi/get-metadata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileNames:v.existingNames})})).json();f.success&&f.metadata&&t.forEach(w=>{const x=f.metadata[w.fileName];x&&(x.muestra!==void 0&&x.muestra!==null&&(w.muestra=x.muestra),x.cantidad!==void 0&&x.cantidad!==null&&(w.cantidad=x.cantidad),x.color!==void 0&&x.color!==null&&(w.color=x.color),x.cort!==void 0&&x.cort!==null&&(w.cort=x.cort),x.obs!==void 0&&x.obs!==null&&(w.obs=x.obs),x.tipo!==void 0&&x.tipo!==null&&(w.tipo=x.tipo),x.loteEntrada!==void 0&&x.loteEntrada!==null?w.loteEntrada=x.loteEntrada:x.lote!==void 0&&x.lote!==null&&(w.loteEntrada=x.lote),x.proveedor!==void 0&&x.proveedor!==null&&(w.proveedor=x.proveedor),x.grado!==void 0&&x.grado!==null&&(w.grado=x.grado),x.fecha!==void 0&&x.fecha!==null&&(w.fecha=x.fecha))})}catch(p){console.warn("Error fetching HVI metadata:",p)}}catch(u){console.warn("Error checking files status:",u)}B.value=t,ae.value=t}catch(u){console.error("Error scanning directory",u)}}async function Ee(){try{const a=await de();if(!a)return;await fe(a)&&await me(a)}catch(a){console.warn("refreshFolder error",a)}}const Re=async a=>{const u=Array.from(a.target.files).filter(p=>p.name.toLowerCase().endsWith(".txt")),v=u.map(p=>ke(p.name,null,p));if(v.length>0)try{const f=await(await fetch("/api/hvi/check-files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileNames:v.map(w=>w.fileName)})})).json();if(f.success&&(v.forEach(w=>{f.existingNames.includes(w.fileName)&&(w.estado="Procesado")}),f.existingNames.length>0))try{const x=await(await fetch("/api/hvi/get-metadata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileNames:f.existingNames})})).json();x.success&&x.metadata&&v.forEach(K=>{const j=x.metadata[K.fileName];j&&(j.muestra!==void 0&&j.muestra!==null&&(K.muestra=j.muestra),j.cantidad!==void 0&&j.cantidad!==null&&(K.cantidad=j.cantidad),j.color!==void 0&&j.color!==null&&(K.color=j.color),j.cort!==void 0&&j.cort!==null&&(K.cort=j.cort),j.obs!==void 0&&j.obs!==null&&(K.obs=j.obs))})}catch(w){console.warn("Error fetching HVI metadata:",w)}}catch(p){console.warn("Error checking files status:",p)}if(B.value=v,ae.value=v,u.length>0&&u[0].webkitRelativePath){const p=u[0].webkitRelativePath.split("/");p.length>1&&(te.value=p[0],ge())}},ke=(a,t=null,u=null)=>{const p=a.replace(/\.txt$/i,"").split("_");let f=p[0]?p[0].substring(0,3).toLowerCase():"???";const w=f==="ent"?"Ent":f==="mue"?"Mue":p[0],x=p[1]||"",K=p[2]||"";let j="",i="";return p.length>3&&(i=p[p.length-1],j=p.slice(3,-1).join("-").replace(/^([A-Z])-(\d)-(\d)$/,"$1 $2/$3")),{fileName:a,handle:t,file:u,tipo:w,loteEntrada:x,proveedor:K,grado:j,fecha:i,muestra:"",cantidad:"",color:"",cort:"",obs:"",estado:"Pendiente"}},ve=async a=>{G.value=a.fileName,$.value=a,R.value=[];try{let t="";a.handle?t=await(await a.handle.getFile()).text():a.file&&(t=await a.file.text()),t&&(Se(t),a.tipo==="Ent"&&R.value.length>0&&(a.cantidad=R.value.length))}catch(t){console.error("Error reading HVI file",t)}},Fe=async a=>{G.value!==a.fileName&&await ve(a),Ce()},Ie=a=>{G.value!==a.fileName&&ve(a)},Se=a=>{const t=a.split(`
`),u=[];for(let v=13;v<t.length;v++){const p=t[v].trim();if(!p)continue;const f=p.split(/\s+/),w=f[0]?f[0].toLowerCase():"";if(w==="n")break;if(w.includes("average")||w.includes("q99%")||w==="+/-"||w==="bale")continue;const x=f[1];if(!x||isNaN(parseFloat(x))||f.length<16)continue;const K=f[12]?f[12].replace("-","."):"";u.push({fardo:f[0],sci:f[1],mst:f[2],mic:f[3],mat:f[4],uhml:f[5],ui:f[6],sf:f[7],str:f[8],elg:f[9],rd:f[10],plusB:f[11],tipo:K,trCnt:f[13],trAr:f[14],trid:f[15]})}R.value=u},Me=async()=>{if(R.value.length===0){H.fire({icon:"info",title:"Sin datos",text:"No hay datos HVI para exportar"});return}try{const a=new Pe.Workbook,t=a.addWorksheet("Datos HVI");t.columns=[{header:"Fardo",key:"fardo",width:14},{header:"SCI",key:"sci",width:8},{header:"MST",key:"mst",width:8},{header:"MIC",key:"mic",width:8},{header:"MAT",key:"mat",width:8},{header:"UHML",key:"uhml",width:8},{header:"UI",key:"ui",width:8},{header:"SF",key:"sf",width:8},{header:"STR",key:"str",width:8},{header:"ELG",key:"elg",width:8},{header:"Rd",key:"rd",width:8},{header:"+b",key:"plusB",width:8},{header:"TIPO",key:"tipo",width:10},{header:"TrCnt",key:"trCnt",width:8},{header:"TrAr",key:"trAr",width:8},{header:"TrID",key:"trid",width:8}],R.value.forEach(x=>{t.addRow({fardo:x.fardo,sci:parseFloat(x.sci)||0,mst:parseFloat(x.mst)||0,mic:parseFloat(x.mic)||0,mat:parseFloat(x.mat)||0,uhml:parseFloat(x.uhml)||0,ui:parseFloat(x.ui)||0,sf:parseFloat(x.sf)||0,str:parseFloat(x.str)||0,elg:parseFloat(x.elg)||0,rd:parseFloat(x.rd)||0,plusB:parseFloat(x.plusB)||0,tipo:x.tipo,trCnt:parseFloat(x.trCnt)||0,trAr:parseFloat(x.trAr)||0,trid:parseFloat(x.trid)||0})}),t.getRow(1).eachCell(x=>{x.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF1E293B"}},x.font={color:{argb:"FFFFFFFF"},bold:!0},x.alignment={vertical:"middle",horizontal:"center"},x.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),t.eachRow((x,K)=>{K!==1&&x.eachCell(j=>{j.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},j.alignment={vertical:"middle",horizontal:"center"},K%2===0&&(j.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFF8FAFC"}})})});const v=await a.xlsx.writeBuffer(),p=new Blob([v],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),f=window.URL.createObjectURL(p),w=document.createElement("a");w.href=f,w.download=`HVI_Export_${G.value||"data"}.xlsx`,w.click(),window.URL.revokeObjectURL(f),H.fire({toast:!0,position:"top-end",icon:"success",title:"Excel exportado correctamente",showConfirmButton:!1,timer:2e3})}catch(a){console.error("Error exportando Excel:",a),H.fire({icon:"error",title:"Error",text:"No se pudo exportar el archivo Excel"})}},Ce=async()=>{if(!$.value||R.value.length===0){H.fire({toast:!0,position:"top-end",icon:"warning",title:"Seleccione un archivo con datos",showConfirmButton:!1,timer:3e3});return}if(!$.value.color){H.fire({toast:!0,position:"top-end",icon:"warning",title:"Debe seleccionar un Color",showConfirmButton:!1,timer:3e3});return}if($.value.tipo!=="Mue"&&!$.value.cort){H.fire({toast:!0,position:"top-end",icon:"warning",title:"Debe seleccionar un valor para Cort",showConfirmButton:!1,timer:3e3});return}if($.value.tipo==="Mue"&&(!$.value.cantidad||$.value.cantidad<=0)){H.fire({toast:!0,position:"top-end",icon:"warning",title:"Debe ingresar la cantidad para muestras",showConfirmButton:!1,timer:3e3});return}H.fire({title:"Guardando datos...",html:"Por favor, espere",allowOutsideClick:!1,didOpen:()=>{H.showLoading()}});try{const a={files:[{metadata:{fileName:$.value.fileName,tipo:$.value.tipo,loteEntrada:$.value.loteEntrada,proveedor:$.value.proveedor,grado:$.value.grado,fecha:$.value.fecha,muestra:$.value.muestra,cantidad:$.value.cantidad,color:$.value.color,cort:$.value.tipo==="Mue"?null:$.value.cort,obs:$.value.obs},details:R.value}]},u=await(await fetch("/api/hvi/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();H.close(),u.success?(H.fire({toast:!0,position:"top-end",icon:"success",title:"Datos guardados correctamente",showConfirmButton:!1,timer:3e3}),$.value.estado="Procesado",(B.value.length===0||B.value.every(p=>p.estado==="Procesado"))&&(G.value="",$.value=null,R.value=[])):H.fire({icon:"error",title:"Error al guardar",text:u.error})}catch(a){H.close(),console.error("Error en processFiles:",a),H.fire({icon:"error",title:"Error de conexi√≥n",text:"No se pudo contactar con el servidor"})}};return _e(async()=>{try{const a=await de();a&&(ne.value=!0,console.log("Carpeta persistida encontrada:",a.name),te.value=a.name,await fe(a)&&await me(a))}catch(a){console.warn("onMounted getDirHandle error",a)}}),(a,t)=>{var v,p,f,w,x,K,j;const u=Le("tippy");return r(),n("div",oo,[e("div",ro,[t[23]||(t[23]=e("div",{class:"flex flex-col ml-8"},[e("h2",{class:"text-lg font-bold text-slate-800 flex items-center gap-2"},[e("span",{class:"p-1.5 bg-blue-100 text-blue-600 rounded-lg"},"üß¨"),Z(" Carga de Archivos HVI (Mistura) ")])],-1)),e("div",lo,[e("button",{onClick:t[0]||(t[0]=i=>L.value=!0),title:"Ver Comparativa Muestra vs Entrega",class:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-black uppercase tracking-widest rounded-lg transition-all shadow-lg shadow-indigo-200 active:scale-95"},[...t[18]||(t[18]=[e("span",null,"‚öñÔ∏è Comparar Muestras",-1)])]),e("div",no,[oe(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>te.value=i),type:"text",placeholder:"Ruta de la carpeta...",class:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-slate-50 group-hover:bg-white",onChange:ge},null,544),[[ue,te.value]]),t[19]||(t[19]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7a2 2 0 012-2h3l2 3h6a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"})])],-1))]),e("button",{onClick:Ae,title:"Seleccionar Carpeta",class:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all shadow-lg shadow-blue-200 shrink-0 active:scale-95"},[...t[20]||(t[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)])]),ne.value?(r(),n("button",{key:0,onClick:Ee,title:"Actualizar lista",class:"p-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg border border-slate-300 transition-all shrink-0 active:scale-95"},[...t[21]||(t[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])):k("",!0),e("button",{onClick:Ce,disabled:!ae.value.length,title:ae.value.length?`Procesar (${ae.value.length} archivos)`:"Sin archivos",class:"p-2 bg-green-600 hover:bg-green-700 disabled:bg-slate-300 text-white rounded-lg transition-all shadow-lg shadow-green-200 shrink-0 active:scale-95"},[...t[22]||(t[22]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)])],8,io)])]),e("div",co,[e("div",uo,[e("div",po,[t[24]||(t[24]=e("span",{class:"text-[10px] font-bold text-slate-500 uppercase"},"Mostrar:",-1)),e("div",xo,[(r(),n(J,null,W(["Todos","No guardados","Guardados"],i=>e("label",{key:i,class:"flex items-center gap-1.5 cursor-pointer group"},[oe(e("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=ce=>re.value=ce),value:i,class:"w-3 h-3 text-blue-600 focus:ring-blue-500 border-slate-300"},null,8,bo),[[Ne,re.value]]),e("span",fo,s(i),1)])),64))])]),e("div",go,[e("table",mo,[t[30]||(t[30]=e("thead",{class:"sticky top-0 z-10 bg-slate-100 border-b border-slate-200 shadow-sm"},[e("tr",null,[e("th",{class:"w-8 px-1 py-3 text-xs font-bold text-slate-700 tracking-wider"},"Tipo"),e("th",{class:"w-10 px-1 py-3 text-xs font-bold text-slate-700 tracking-wider"},"Lote"),e("th",{class:"w-30 px-1 py-3 text-xs font-bold text-slate-700 tracking-wider"},"Prov."),e("th",{class:"w-10 px-1 py-3 text-xs font-bold text-slate-700 tracking-wider"},"Grado"),e("th",{class:"w-10 px-1 py-3 text-xs font-bold text-slate-700 tracking-wider"},"Muestra"),e("th",{class:"w-8 px-1 py-3 text-xs font-bold text-slate-700 tracking-wider text-center"},"Cant."),e("th",{class:"w-11 px-1 py-3 text-xs font-bold text-slate-700 tracking-wider"},"Color"),e("th",{class:"w-8 px-1 py-3 text-xs font-bold text-slate-700 tracking-wider text-center"},"Cort"),e("th",{class:"w-120 px-1 py-3 text-xs font-bold text-slate-700 tracking-wider"},"Obs"),e("th",{class:"w-14 px-1 py-3 text-xs font-bold text-slate-700 tracking-wider text-center"},"Acci√≥n"),e("th",{class:"w-10 px-1 py-2 text-xs font-bold text-slate-700 tracking-wider text-center"},"Estado")])],-1)),e("tbody",vo,[(r(!0),n(J,null,W(ee.value,(i,ce)=>(r(),n("tr",{key:i.fileName,onClick:M=>ve(i),class:m(["hover:bg-blue-50/50 transition-colors group cursor-pointer",{"bg-blue-50 border-l-4 border-blue-500":G.value===i.fileName}])},[e("td",wo,[e("span",{class:m(["px-1.5 py-0.5 rounded-full font-mono",i.tipo==="Ent"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"])},s(i.tipo),3)]),e("td",yo,s(i.loteEntrada),1),e("td",{class:"px-1 py-2 text-xs text-slate-600 truncate",title:i.proveedor},s(i.proveedor),9,_o),e("td",ko,s(i.grado),1),e("td",{class:"px-1 py-1 text-xs",onClick:t[3]||(t[3]=ie(()=>{},["stop"]))},[oe(e("input",{"onUpdate:modelValue":M=>i.muestra=M,type:"text",class:m(["w-full px-2 py-1 border border-slate-200 rounded text-xs focus:ring-1 focus:ring-blue-500 outline-none disabled:bg-slate-50 disabled:opacity-50",G.value===i.fileName?"bg-white":""])},null,10,Co),[[ue,i.muestra]])]),e("td",{class:"px-1 py-1 text-xs text-center",onClick:t[4]||(t[4]=ie(()=>{},["stop"]))},[oe(e("input",{"onUpdate:modelValue":M=>i.cantidad=M,type:"number",readonly:i.tipo==="Ent",class:m([[i.tipo==="Ent"?"bg-slate-50 text-blue-700":"",G.value===i.fileName?"bg-white":""],"w-full px-1 py-1 border border-slate-200 rounded text-xs focus:ring-1 focus:ring-blue-500 outline-none no-spinner text-center"])},null,10,$o),[[ue,i.cantidad]])]),e("td",{class:"px-1 py-1 text-xs",onClick:t[5]||(t[5]=ie(()=>{},["stop"]))},[oe(e("select",{"onUpdate:modelValue":M=>i.color=M,class:"w-full px-1 py-1 border border-slate-200 rounded text-xs focus:ring-1 focus:ring-blue-500 outline-none bg-white disabled:bg-slate-50 disabled:opacity-50 cursor-pointer"},[(r(),n(J,null,W(["LG","BCO","LA","GRI","AMA"],M=>e("option",{key:M,value:M},s(M),9,Eo)),64))],8,Ao),[[he,i.color]])]),e("td",{class:"px-1 py-1 text-xs",onClick:t[6]||(t[6]=ie(()=>{},["stop"]))},[oe(e("select",{"onUpdate:modelValue":M=>i.cort=M,disabled:i.tipo==="Mue",class:m(["w-full px-1 py-1 border border-slate-200 rounded text-xs focus:ring-1 focus:ring-blue-500 outline-none disabled:bg-slate-50 disabled:opacity-50 cursor-pointer",G.value===i.fileName?"bg-white":""])},[(r(),n(J,null,W([1,2,3],M=>e("option",{key:M,value:M},s(M),9,Fo)),64))],10,Ro),[[he,i.cort]])]),e("td",{class:"px-1 py-1 text-xs",onClick:t[7]||(t[7]=ie(()=>{},["stop"]))},[oe(e("input",{"onUpdate:modelValue":M=>i.obs=M,type:"text",class:m(["w-full px-1 py-1 border border-slate-200 rounded text-xs focus:ring-1 focus:ring-blue-500 outline-none",G.value===i.fileName?"bg-white":""])},null,10,Io),[[ue,i.obs]])]),e("td",{class:"px-1 py-1 text-xs text-center",onClick:t[8]||(t[8]=ie(()=>{},["stop"]))},[e("div",So,[oe((r(),n("button",{onClick:M=>Fe(i),disabled:i.estado==="Procesado",class:m(["p-1.5 rounded-md transition-all sm:p-1",i.estado==="Procesado"?"text-slate-300 cursor-not-allowed":"text-green-600 hover:bg-green-50 active:scale-95 border border-transparent hover:border-green-200"])},[...t[25]||(t[25]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1)])],10,Mo)),[[u,{content:"Guardar ensayo"}]]),oe((r(),n("button",{onClick:M=>Ie(i),disabled:i.estado!=="Procesado",class:m(["p-1.5 rounded-md transition-all sm:p-1",i.estado!=="Procesado"?"text-slate-200 cursor-not-allowed":"text-blue-600 hover:bg-blue-50 active:scale-95 border border-transparent hover:border-blue-200"])},[...t[26]||(t[26]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],10,To)),[[u,{content:"Editar metadatos"}]])])]),e("td",jo,[i.estado==="Procesado"?(r(),n("div",Lo,[...t[27]||(t[27]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])])):(r(),n("div",No,[...t[28]||(t[28]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])]))])],10,ho))),128)),B.value.length===0?(r(),n("tr",Po,[...t[29]||(t[29]=[e("td",{colspan:"10",class:"px-4 py-16 text-center"},[e("p",{class:"text-xs text-slate-400"},"No hay archivos")],-1)])])):k("",!0)])])]),e("div",Do,[e("span",Bo,s(B.value.length)+" archivos",1)])]),e("div",Oo,[G.value?(r(),n("div",zo,[e("div",Vo,[e("span",Ho,[t[31]||(t[31]=Z("Detalles: ",-1)),e("span",Uo,s(G.value),1)]),t[32]||(t[32]=e("span",{class:"text-[10px] text-slate-500 flex items-center gap-1 ml-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),Z(" Formato: "),e("b",null,"Tipo_Lote_Proveedor_Grado_Fecha.txt")],-1))]),e("div",Go,[R.value.length>0?(r(),n("button",{key:0,onClick:Me,title:"Exportar a Excel",class:"flex items-center justify-center p-1.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-all shadow-md active:scale-95"},[...t[33]||(t[33]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])])):k("",!0),R.value.length>0?(r(),n("div",qo,[oe(e("select",{"onUpdate:modelValue":t[9]||(t[9]=i=>y.value=i),class:"appearance-none pl-2 pr-5 py-1.5 text-[10px] uppercase font-bold bg-white border border-indigo-200 rounded-lg text-indigo-700 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 cursor-pointer hover:border-indigo-400 transition-colors"},[...t[34]||(t[34]=[e("option",{value:"gemini-3-pro-preview"},"Gemini 3 Pro",-1),e("option",{value:"gemini-3-flash-preview"},"Gemini 3 Flash",-1),e("option",{value:"gemini-2.0-flash"},"Gemini 2.0 Flash",-1),e("option",{value:"gemini-2.0-flash-exp"},"Gemini 2.0 Exp",-1)])],512),[[he,y.value]]),t[35]||(t[35]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-indigo-400 group-hover:text-indigo-600"},[e("svg",{class:"fill-current h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1))])):k("",!0),R.value.length>0?(r(),n("button",{key:2,onClick:Y,disabled:g.value,class:"flex items-center gap-1.5 px-3 py-1.5 bg-linear-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white text-xs font-bold rounded-lg transition-all shadow-md active:scale-95 disabled:opacity-50"},[g.value?(r(),n("span",Jo,"üåÄ")):(r(),n("span",Wo,"‚ú® An√°lisis IA"))],8,Zo)):k("",!0),R.value.length>0?(r(),n("button",{key:3,onClick:t[10]||(t[10]=i=>U.value=!0),disabled:c.value,class:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white text-xs font-bold rounded-lg transition-all shadow-md active:scale-95 disabled:opacity-50",title:"Verificar contra Contrato y Tolerancias"},[c.value?(r(),n("span",Qo,"‚è≥")):(r(),n("span",Xo,"üìã Verificar Contrato"))],8,Ko)):k("",!0),R.value.length>0?(r(),n("button",{key:4,onClick:t[11]||(t[11]=i=>le.value=!0),class:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-white text-xs font-medium rounded-lg transition-all shadow-md active:scale-95"},[...t[36]||(t[36]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),Z(" An√°lisis T√©cnico ",-1)])])):k("",!0)])])):k("",!0),e("div",Yo,[e("table",er,[t[38]||(t[38]=e("thead",{class:"sticky top-0 z-10 bg-slate-100 border-b border-slate-200"},[e("tr",null,[e("th",{class:"w-20 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"Fardo"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"SCI"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"MST"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"MIC"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"MAT"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"UHML"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"UI"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"SF"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"STR"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"ELG"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"RD"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"+b"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"TIPO"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"TrCNT"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"TrAR"),e("th",{class:"w-16 px-4 py-3 text-xs font-bold text-slate-700 tracking-wider"},"TRID")])],-1)),e("tbody",tr,[(r(!0),n(J,null,W(R.value,(i,ce)=>(r(),n("tr",{key:ce,class:m(["hover:bg-slate-50 transition-colors",E(i).alertas.some(M=>M.tipo==="bandera-roja")?"ring-2 ring-red-400 ring-inset":""])},[e("td",sr,[Z(s(i.fardo)+" ",1),E(i).alertas.length?(r(),n("div",ar,[(r(!0),n(J,null,W(E(i).alertas,(M,Te)=>(r(),n("span",{key:Te,title:M.mensaje,class:m(["w-2.5 h-2.5 rounded-full cursor-help",M.tipo==="bandera-roja"?"bg-red-500":"",M.tipo==="riesgo-tenido"?"bg-purple-500":"",M.tipo==="fibra-opaca"?"bg-amber-500":""])},null,10,or))),128))])):k("",!0)]),e("td",{class:m(["px-4 py-2 text-xs font-medium",_(i.fardo,b("sci"))?"bg-red-500 text-white font-bold":C(E(i).sci)])},s(i.sci),3),e("td",rr,s(i.mst),1),e("td",{class:m(["px-4 py-2 text-xs font-medium",_(i.fardo,b("mic"))?"bg-red-500 text-white font-bold":C(E(i).mic)])},s(i.mic),3),e("td",lr,s(i.mat),1),e("td",{class:m(["px-4 py-2 text-xs font-medium",_(i.fardo,b("uhml"))?"bg-red-500 text-white font-bold":C(E(i).uhml)])},s(i.uhml),3),e("td",{class:m(["px-4 py-2 text-xs font-medium",_(i.fardo,b("ui"))?"bg-red-500 text-white font-bold":C(E(i).ui)])},s(i.ui),3),e("td",{class:m(["px-4 py-2 text-xs font-medium",_(i.fardo,b("sf"))?"bg-red-500 text-white font-bold":C(E(i).sf)])},s(i.sf),3),e("td",{class:m(["px-4 py-2 text-xs font-medium",_(i.fardo,b("str"))?"bg-red-500 text-white font-bold":C(E(i).str)])},s(i.str),3),e("td",nr,s(i.elg),1),e("td",{class:m(["px-4 py-2 text-xs font-medium",_(i.fardo,b("rd"))?"bg-red-500 text-white font-bold":C(E(i).rd)])},s(i.rd),3),e("td",{class:m(["px-4 py-2 text-xs font-medium",_(i.fardo,b("plusB"))?"bg-red-500 text-white font-bold":C(E(i).plusB)])},s(i.plusB),3),e("td",ir,s(i.tipo),1),e("td",{class:m(["px-4 py-2 text-xs font-medium",_(i.fardo,b("trCnt"))?"bg-red-500 text-white font-bold":"text-slate-600"])},s(i.trCnt),3),e("td",{class:m(["px-4 py-2 text-xs font-medium",_(i.fardo,b("trAr"))?"bg-red-500 text-white font-bold":C(E(i).trAr)])},s(i.trAr),3),e("td",dr,s(i.trid),1)],2))),128)),R.value.length?k("",!0):(r(),n("tr",cr,[...t[37]||(t[37]=[e("td",{colspan:"16",class:"px-4 py-16 text-center"},[e("div",{class:"flex flex-col items-center justify-center text-slate-400"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mb-2 opacity-20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})]),e("p",{class:"text-sm"},"Seleccione un archivo de la izquierda para ver el detalle")])],-1)])]))]),R.value.length?(r(),n("tfoot",ur,[e("tr",pr,[e("td",xr,"n = "+s(R.value.length)+" (Prom)",1),e("td",{title:d(b("sci")),class:m(["px-4 py-3 text-xs",l(b("sci"),C(S(F.value.sci,I.SCI)))])},s(F.value.sci),11,br),e("td",fr,s(F.value.mst),1),e("td",{title:d(b("mic")),class:m(["px-4 py-3 text-xs",l(b("mic"),C(Q(F.value.mic)))])},s(F.value.mic),11,gr),e("td",mr,s(F.value.mat),1),e("td",{title:d(b("uhml")),class:m(["px-4 py-3 text-xs",l(b("uhml"),C(S(F.value.uhml,I.UHML)))])},s(F.value.uhml),11,vr),e("td",{title:d(b("ui")),class:m(["px-4 py-3 text-xs",l(b("ui"),C(S(F.value.ui,I.UI)))])},s(F.value.ui),11,hr),e("td",{title:d(b("sf")),class:m(["px-4 py-3 text-xs",l(b("sf"),C(A(F.value.sf,I.SF)))])},s(F.value.sf),11,wr),e("td",{title:d(b("str")),class:m(["px-4 py-3 text-xs",l(b("str"),C(S(F.value.str,I.STR)))])},s(F.value.str),11,yr),e("td",_r,s(F.value.elg),1),e("td",{title:d(b("rd")),class:m(["px-4 py-3 text-xs",l(b("rd"),C(S(F.value.rd,I.RD)))])},s(F.value.rd),11,kr),e("td",{title:d(b("plusB")),class:m(["px-4 py-3 text-xs",l(b("plusB"),C(A(F.value.plusB,I.PLUS_B)))])},s(F.value.plusB),11,Cr),e("td",$r,s(F.value.tipo),1),e("td",{title:d(b("trCnt")),class:m(["px-4 py-3 text-xs",l(b("trCnt"),"")])},s(F.value.trCnt),11,Ar),e("td",{title:d(b("trAr")),class:m(["px-4 py-3 text-xs",l(b("trAr"),C(A(F.value.trAr,I.TRAR)))])},s(F.value.trAr),11,Er),e("td",Rr,s(F.value.trid),1)])])):k("",!0)])]),R.value.length?(r(),n("div",Fr,[t[39]||(t[39]=be('<div class="flex flex-wrap items-center gap-4 text-xs" data-v-216d29d3><span class="font-semibold text-slate-600" data-v-216d29d3>Clasificaci√≥n:</span><span class="flex items-center gap-1" data-v-216d29d3><span class="w-3 h-3 rounded bg-green-100 border border-green-300" data-v-216d29d3></span> Excelente</span><span class="flex items-center gap-1" data-v-216d29d3><span class="w-3 h-3 rounded bg-yellow-50 border border-yellow-300" data-v-216d29d3></span> Aceptable</span><span class="flex items-center gap-1" data-v-216d29d3><span class="w-3 h-3 rounded bg-orange-100 border border-orange-300" data-v-216d29d3></span> Cr√≠tico</span><span class="flex items-center gap-1" data-v-216d29d3><span class="w-3 h-3 rounded bg-red-100 border border-red-300" data-v-216d29d3></span> Fuera de rango</span><span class="border-l border-slate-300 pl-4 font-semibold text-slate-600" data-v-216d29d3>Alertas:</span><span class="flex items-center gap-1" data-v-216d29d3><span class="w-3 h-3 rounded-full bg-red-500" data-v-216d29d3></span> Bandera Roja (STR/SF)</span><span class="flex items-center gap-1" data-v-216d29d3><span class="w-3 h-3 rounded-full bg-purple-500" data-v-216d29d3></span> Riesgo Te√±ido (MIC)</span><span class="flex items-center gap-1" data-v-216d29d3><span class="w-3 h-3 rounded-full bg-amber-500" data-v-216d29d3></span> Fibra Opaca (RD)</span></div>',1)),D.value.total>0?(r(),n("div",Ir,[D.value.banderaRoja?(r(),n("span",Sr,s(D.value.banderaRoja)+" pacas con Bandera Roja ",1)):k("",!0),D.value.riesgoTenido?(r(),n("span",Mr,s(D.value.riesgoTenido)+" pacas con Riesgo de Te√±ido ",1)):k("",!0),D.value.fibraOpaca?(r(),n("span",Tr,s(D.value.fibraOpaca)+" pacas con Fibra Opaca ",1)):k("",!0)])):k("",!0)])):k("",!0)])]),e("input",{ref_key:"folderInput",ref:q,type:"file",webkitdirectory:"",directory:"",multiple:"",class:"hidden",onChange:Re},null,544),(r(),pe(xe,{to:"body"},[le.value?(r(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:t[13]||(t[13]=ie(i=>le.value=!1,["self"]))},[e("div",jr,[e("button",{onClick:t[12]||(t[12]=i=>le.value=!1),class:"absolute top-4 right-4 z-10 p-2 bg-slate-700 hover:bg-slate-600 text-white rounded-full transition-colors shadow-lg"},[...t[40]||(t[40]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),we(Cs,{pacas:R.value,metadata:$.value},null,8,["pacas","metadata"])])])):k("",!0)])),(r(),pe(xe,{to:"body"},[L.value?(r(),n("div",Lr,[e("div",Nr,[e("button",{onClick:t[14]||(t[14]=i=>L.value=!1),class:"absolute top-6 right-6 p-2 bg-slate-100 hover:bg-slate-200 text-slate-500 rounded-full transition-all active:scale-95"},[...t[41]||(t[41]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),we(ao)])])):k("",!0)])),(r(),pe(xe,{to:"body"},[U.value?(r(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:t[16]||(t[16]=ie(i=>U.value=!1,["self"]))},[e("div",Pr,[e("button",{onClick:t[15]||(t[15]=i=>U.value=!1),class:"absolute top-4 right-4 z-10 p-2 bg-slate-700 hover:bg-slate-600 text-white rounded-full transition-colors shadow-lg"},[...t[42]||(t[42]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),we(Ra,{pacas:R.value,metadata:{loteEntrada:((v=$.value)==null?void 0:v.loteEntrada)||"Lote Mix",proveedor:((p=$.value)==null?void 0:p.proveedor)||"N/A",grado:(f=$.value)==null?void 0:f.grado,fecha:(w=$.value)==null?void 0:w.fecha,color:(x=$.value)==null?void 0:x.color,cort:(K=$.value)==null?void 0:K.cort,obs:(j=$.value)==null?void 0:j.obs}},null,8,["pacas","metadata"])])])):k("",!0)])),(r(),pe(xe,{to:"body"},[h.value?(r(),n("div",Dr,[e("div",Br,[e("div",Or,[t[44]||(t[44]=e("div",null,[e("h3",{class:"font-bold text-base"},"Gemini 3: Predicci√≥n T√©cnica"),e("p",{class:"text-[10px] opacity-80 uppercase tracking-widest font-bold"},"Inteligencia Artificial aplicada a Fibras")],-1)),e("button",{onClick:t[17]||(t[17]=i=>h.value=!1),class:"p-1.5 hover:bg-white/10 rounded-full transition-colors"},[...t[43]||(t[43]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",zr,[g.value?(r(),n("div",Vr,[...t[45]||(t[45]=[e("div",{class:"w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-sm text-slate-500 font-medium text-center"},"Analizando fardo por fardo para predecir neps y resistencia...",-1)])])):(r(),n("div",Hr,s(se.value),1))]),e("div",Ur,[e("span",null,"MODEL: "+s(y.value.toUpperCase()),1),t[46]||(t[46]=e("span",null,"DATA: FULL BALE FEEDBACK",-1))])])])):k("",!0)]))])}}},Kr=ye(Gr,[["__scopeId","data-v-216d29d3"]]);export{Kr as default};
