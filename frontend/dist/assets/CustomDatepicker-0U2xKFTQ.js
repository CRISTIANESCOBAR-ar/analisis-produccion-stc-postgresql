import{m as k,o as W,y as G,w as P,z as Q,a as l,c as i,t as y,e as j,b as u,h as A,i as c,F as $,r as S,n as X,f as C,d as V,p as F}from"./index-DYTbJAB1.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _={class:"fecha-controls inline-flex items-center gap-2"},ee={key:0,class:"text-sm text-slate-600 font-medium"},te=["value","placeholder"],ne={key:0,class:"calendar-dropdown absolute top-[calc(100%+4px)] right-0 bg-white border border-slate-200 rounded-lg shadow-xl p-3 z-50 min-w-[280px]"},oe={class:"calendar-header flex justify-between items-center mb-3"},ae={class:"calendar-selects flex gap-1"},se=["value"],re=["value"],le=["value"],ie=["value"],ue={class:"calendar-weekdays grid grid-cols-7 gap-1 mb-2"},de={class:"calendar-days grid grid-cols-7 gap-1"},ce=["onClick","disabled"],me={key:1,class:"flex gap-1"},pe={__name:"CustomDatepicker",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:"Selecciona una fecha"},showButtons:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(x,{emit:J}){const m=x,h=J,f=k(!1),r=k(new Date().getMonth()),d=k(new Date().getFullYear()),Y=k(null),B=n=>{Y.value&&!Y.value.contains(n.target)&&(f.value=!1)};W(()=>{document.addEventListener("click",B)}),G(()=>{document.removeEventListener("click",B)});const O=F(()=>{if(!m.modelValue)return"";const[n,e,a]=m.modelValue.split("-").map(Number),t=new Date(n,e-1,a),o=t.getDate().toString().padStart(2,"0"),p=(t.getMonth()+1).toString().padStart(2,"0"),v=t.getFullYear();return`${o}/${p}/${v}`}),K=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],R=F(()=>{const n=new Date().getFullYear(),e=2020,a=[];for(let t=e;t<=n+1;t++)a.push(t);return a}),L=F(()=>new Date(d.value,r.value));P(()=>f.value,n=>{if(n&&m.modelValue){const[e,a]=m.modelValue.split("-").map(Number);r.value=a-1,d.value=e}});function T(n){r.value=parseInt(n.target.value)}function q(n){d.value=parseInt(n.target.value)}const H=F(()=>{const n=[],e=new Date(d.value,r.value,1),a=new Date(d.value,r.value+1,0),t=new Date(d.value,r.value,0),o=e.getDay(),p=a.getDate(),v=t.getDate();for(let s=o-1;s>=0;s--)n.push({day:v-s,otherMonth:!0,key:`prev-${v-s}`});const b=new Date,g=m.modelValue?new Date(m.modelValue+"T00:00:00"):null;for(let s=1;s<=p;s++){const w=new Date(d.value,r.value,s);n.push({day:s,otherMonth:!1,selected:g&&g.getDate()===s&&g.getMonth()===r.value&&g.getFullYear()===d.value,today:b.getDate()===s&&b.getMonth()===r.value&&b.getFullYear()===d.value,key:`current-${s}`,date:w})}const N=42-n.length;for(let s=1;s<=N;s++)n.push({day:s,otherMonth:!0,key:`next-${s}`});return n});function I(){f.value=!f.value}function z(n){r.value+=n,r.value>11?(r.value=0,d.value++):r.value<0&&(r.value=11,d.value--)}function U(n){if(n.otherMonth)return;const e=d.value,a=(r.value+1).toString().padStart(2,"0"),t=n.day.toString().padStart(2,"0"),o=`${e}-${a}-${t}`;h("update:modelValue",o),h("change",o),f.value=!1}function D(n){if(!m.modelValue)return;const[e,a,t]=m.modelValue.split("-").map(Number),o=new Date(e,a-1,t);o.setDate(o.getDate()+n);const p=o.getFullYear(),v=(o.getMonth()+1).toString().padStart(2,"0"),b=o.getDate().toString().padStart(2,"0"),g=`${p}-${v}-${b}`;h("update:modelValue",g),h("change",g)}function E(n){if(!m.modelValue)return;const[e,a,t]=m.modelValue.split("-").map(Number),o=new Date(e,a-1,1);o.setMonth(o.getMonth()+n);const p=new Date;p.setHours(0,0,0,0);const v=o.getFullYear()===p.getFullYear()&&o.getMonth()===p.getMonth();let b;if(v){const M=new Date(p);M.setDate(M.getDate()-1),b=M.getDate()}else b=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();o.setDate(b);const g=o.getFullYear(),N=(o.getMonth()+1).toString().padStart(2,"0"),s=o.getDate().toString().padStart(2,"0"),w=`${g}-${N}-${s}`;h("update:modelValue",w),h("change",w)}return(n,e)=>{const a=Q("tippy");return l(),i("div",_,[x.label?(l(),i("label",ee,y(x.label),1)):j("",!0),u("div",{class:"custom-datepicker relative",ref_key:"datepickerRef",ref:Y},[u("input",{type:"text",value:O.value,class:"filter-input datepicker-input w-32 px-3 py-1.5 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all cursor-pointer bg-white",placeholder:x.placeholder,onClick:I,onKeydown:[e[0]||(e[0]=A(c(t=>D(-1),["prevent"]),["left"])),e[1]||(e[1]=A(c(t=>D(1),["prevent"]),["right"]))],readonly:""},null,40,te),u("span",{class:"calendar-icon absolute right-3 top-1/2 -translate-y-1/2 text-lg cursor-pointer select-none",onClick:I},"ðŸ“…"),f.value?(l(),i("div",ne,[u("div",oe,[u("button",{class:"calendar-nav-btn w-8 h-8 flex items-center justify-center border border-slate-200 rounded bg-white text-blue-600 hover:bg-blue-600 hover:text-white transition-colors",onClick:e[2]||(e[2]=c(t=>z(-1),["stop"]))},"<"),u("div",ae,[u("select",{value:L.value.getMonth(),onChange:T,onClick:e[3]||(e[3]=c(()=>{},["stop"])),class:"calendar-select text-sm font-semibold text-slate-700 bg-transparent border-none cursor-pointer hover:bg-slate-100 rounded px-1 focus:ring-0"},[(l(),i($,null,S(K,(t,o)=>u("option",{key:o,value:o},y(t),9,re)),64))],40,se),u("select",{value:L.value.getFullYear(),onChange:q,onClick:e[4]||(e[4]=c(()=>{},["stop"])),class:"calendar-select text-sm font-semibold text-slate-700 bg-transparent border-none cursor-pointer hover:bg-slate-100 rounded px-1 focus:ring-0"},[(l(!0),i($,null,S(R.value,t=>(l(),i("option",{key:t,value:t},y(t),9,ie))),128))],40,le)]),u("button",{class:"calendar-nav-btn w-8 h-8 flex items-center justify-center border border-slate-200 rounded bg-white text-blue-600 hover:bg-blue-600 hover:text-white transition-colors",onClick:e[5]||(e[5]=c(t=>z(1),["stop"]))},">")]),u("div",ue,[(l(),i($,null,S(["Dom","Lun","Mar","MiÃ©","Jue","Vie","SÃ¡b"],t=>u("span",{key:t,class:"text-center text-[11px] font-semibold text-slate-500"},y(t),1)),64))]),u("div",de,[(l(!0),i($,null,S(H.value,t=>(l(),i("button",{key:t.key,class:X(["calendar-day aspect-square flex items-center justify-center text-[13px] rounded border transition-colors",{"text-slate-300 bg-slate-50 border-transparent cursor-default":t.otherMonth,"bg-blue-600 text-white border-blue-600 font-semibold":t.selected,"border-blue-600 font-semibold text-slate-700":t.today&&!t.selected,"bg-white border-slate-200 text-slate-700 hover:bg-blue-50 hover:border-blue-600":!t.selected&&!t.otherMonth&&!t.today}]),onClick:c(o=>U(t),["stop"]),disabled:t.otherMonth},y(t.day),11,ce))),128))])])):j("",!0)],512),x.showButtons?(l(),i("div",me,[C((l(),i("button",{class:"inline-flex items-center justify-center px-2 py-1 border border-slate-200 bg-white text-slate-700 rounded-md text-sm font-medium hover:bg-slate-50 transition-colors duration-150 shadow-sm h-[34px]",onClick:e[6]||(e[6]=t=>E(-1)),onMousedown:e[7]||(e[7]=c(()=>{},["prevent"])),tabindex:"-1"},[...e[14]||(e[14]=[V("<<",-1)])],32)),[[a,{content:"Mes anterior",placement:"bottom"}]]),C((l(),i("button",{class:"inline-flex items-center justify-center px-2 py-1 border border-slate-200 bg-white text-slate-700 rounded-md text-sm font-medium hover:bg-slate-50 transition-colors duration-150 shadow-sm h-[34px]",onClick:e[8]||(e[8]=t=>D(-1)),onMousedown:e[9]||(e[9]=c(()=>{},["prevent"])),tabindex:"-1"},[...e[15]||(e[15]=[V("<",-1)])],32)),[[a,{content:"DÃ­a anterior (â†)",placement:"bottom"}]]),C((l(),i("button",{class:"inline-flex items-center justify-center px-2 py-1 border border-slate-200 bg-white text-slate-700 rounded-md text-sm font-medium hover:bg-slate-50 transition-colors duration-150 shadow-sm h-[34px]",onClick:e[10]||(e[10]=t=>D(1)),onMousedown:e[11]||(e[11]=c(()=>{},["prevent"])),tabindex:"-1"},[...e[16]||(e[16]=[V(">",-1)])],32)),[[a,{content:"DÃ­a siguiente (â†’)",placement:"bottom"}]]),C((l(),i("button",{class:"inline-flex items-center justify-center px-2 py-1 border border-slate-200 bg-white text-slate-700 rounded-md text-sm font-medium hover:bg-slate-50 transition-colors duration-150 shadow-sm h-[34px]",onClick:e[12]||(e[12]=t=>E(1)),onMousedown:e[13]||(e[13]=c(()=>{},["prevent"])),tabindex:"-1"},[...e[17]||(e[17]=[V(">>",-1)])],32)),[[a,{content:"Mes siguiente",placement:"bottom"}]])])):j("",!0)])}}},ve=Z(pe,[["__scopeId","data-v-00ad1374"]]);export{ve as C};
